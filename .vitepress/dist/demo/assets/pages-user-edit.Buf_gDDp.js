import{d as e,r as l,t,h as a,a as n,o as r,c as s,w as o,v as u,e as i,u as c,q as d,f as b,g as f,x as O,G as S,_ as m,s as p}from"./index-CNagV5B9.js";import{_ as j}from"./cl-avatar.uvue_vue_type_script_setup_true_lang.Bb9WA0By.js";import{r as v,a as w,_,b as N,u as T}from"./cl-page.uvue_vue_type_script_setup_true_lang.Dujw6vu5.js";import{_ as U}from"./cl-list-item.D9Fwhzfd.js";import{_ as g}from"./cl-list.DqrUvrrm.js";import{_ as J}from"./cl-select.BYv4irCb.js";import{_ as h}from"./cl-select-date.C8hnk9-T.js";import{p as y,_ as k}from"./pca.B2VLYFjF.js";import{u as x}from"./component.C_1pcFTG.js";import{d as C}from"./day.DRenYkEI.js";import{u as z}from"./refs.Cnn9TCyf.js";import{u as Y}from"./index.nroVxdxG.js";import"./cl-image.ChbEKLdo.js";import"./cl-collapse.S3OdLei1.js";import"./cl-select-trigger.DF-0QJ7I.js";import"./form.psaMSS8r.js";import"./cl-picker-view.Cn22dhwu.js";import"./cl-tag.2VZc8Gp8.js";import"./cl-list-view.CWEOrQUF.js";import"./cl-empty.CDnmE2uK.js";const D=e({__name:"edit",setup(e){const D=p().user,q=T(),F=z(),M=C().format("YYYY-MM-DD"),A=l([{label:t("保密"),value:0},{label:t("男"),value:1},{label:t("女"),value:2}]),B=a((()=>{var e;return[t("保密"),t("男"),t("女")][null===(e=u.value)||void 0===e?null:e.gender]}));function E(e){D.update(new UTSJSONObject({gender:e})),q.showToast({message:t("性别设置成功")})}function G(e){D.update(new UTSJSONObject({birthday:e})),q.showToast({message:t("生日设置成功")})}const H=x(y),I=a((()=>{var e,l,t;return[null===(e=u.value)||void 0===e?null:e.province,null===(l=u.value)||void 0===l?null:l.city,null===(t=u.value)||void 0===t?null:t.district].filter(((e=null)=>null!=e)).join(" - ")}));function K(e){D.update(new UTSJSONObject({province:e[0],city:e[1],district:e[2]})),q.showToast({message:t("地区设置成功")})}function L(e){F.open(e)}function P(e){S(new UTSJSONObject({count:1,success(e){var l;l=e.tempFiles[0].path,Y(l).then((e=>{q.showToast({message:t("头像上传成功")}),D.update(new UTSJSONObject({avatarUrl:e}))})).catch(((e=null)=>{q.showToast({message:e.message})}))}}))}return(e=null,l=null)=>{const a=v(n("cl-avatar"),j),S=v(n("cl-icon"),w),p=m,T=v(n("cl-text"),_),y=v(n("cl-list-item"),U),x=v(n("cl-list"),g),C=v(n("cl-select"),J),z=v(n("cl-select-date"),h),Y=v(n("cl-cascader"),k),D=v(n("cl-page"),N);return r(),s(D,null,{default:o((()=>[i(p,new UTSJSONObject({class:"p-3"}),{default:o((()=>{var e,n;return[i(p,new UTSJSONObject({class:"flex flex-col justify-center items-center py-10 mb-3"}),{default:o((()=>[i(p,new UTSJSONObject({class:"relative overflow-visible"}),{default:o((()=>{var e;return[i(a,{src:null===(e=c(u))||void 0===e?null:e.avatarUrl,size:150,pt:new UTSJSONObject({className:"-important-rounded-3xl",icon:new UTSJSONObject({size:60})}),onClick:P},null,8,["src"]),i(p,new UTSJSONObject({class:"flex flex-col justify-center items-center absolute bottom-0 right--bracket-start--6rpx-bracket-end- bg-black rounded-full p-1 border border-solid border-white"}),{default:o((()=>[i(S,new UTSJSONObject({name:"edit-line",color:"white",size:24}))])),_:1})]})),_:1})])),_:1}),i(x,new UTSJSONObject({pt:new UTSJSONObject({className:"mb-3"})}),{default:o((()=>[i(y,new UTSJSONObject({label:c(t)("我的昵称"),hoverable:"",arrow:"",justify:"start",onClick:l[0]||(l[0]=(e=null)=>c(d).to("/pages/user/edit-name"))}),{default:o((()=>[i(T,null,{default:o((()=>{var e;return[b(f(null===(e=c(u))||void 0===e?null:e.nickName),1)]})),_:1})])),_:1},8,["label"]),i(y,new UTSJSONObject({label:"手机号",hoverable:"",justify:"start"}),{default:o((()=>[i(T,null,{default:o((()=>{var e;return[b(f(null===(e=c(u))||void 0===e?null:e.phone),1)]})),_:1})])),_:1})])),_:1}),i(x,new UTSJSONObject({pt:new UTSJSONObject({className:"mb-3"})}),{default:o((()=>[i(y,new UTSJSONObject({label:c(t)("简介"),hoverable:"",arrow:"",justify:"start",onClick:l[1]||(l[1]=(e=null)=>c(d).to("/pages/user/edit-description"))}),{default:o((()=>{var e;return[null==(null===(e=c(u))||void 0===e?null:e.description)?(r(),s(T,new UTSJSONObject({key:0,color:"info"}),new UTSJSONObject({default:o((()=>[b(f(c(t)("介绍一下自己")),1)])),_:1}))):(r(),s(T,new UTSJSONObject({key:1,ellipsis:""}),{default:o((()=>{var e;return[b(f(null===(e=c(u))||void 0===e?null:e.description),1)]})),_:1}))]})),_:1},8,["label"])])),_:1}),i(x,new UTSJSONObject({pt:new UTSJSONObject({className:"mb-3"})}),{default:o((()=>[i(y,new UTSJSONObject({label:c(t)("性别"),hoverable:"",arrow:"",justify:"start",onClick:l[2]||(l[2]=(e=null)=>L("gender"))}),{default:o((()=>[i(T,null,{default:o((()=>[b(f(B.value),1)])),_:1}),""==B.value?(r(),s(T,new UTSJSONObject({key:0,color:"info"}),new UTSJSONObject({default:o((()=>[b(f(c(t)("编辑性别")),1)])),_:1}))):O("",!0)])),_:1},8,["label"]),i(y,new UTSJSONObject({label:c(t)("生日"),hoverable:"",arrow:"",justify:"start",onClick:l[3]||(l[3]=(e=null)=>L("birthday"))}),{default:o((()=>{var e;return[i(T,null,{default:o((()=>{var e;return[b(f(null===(e=c(u))||void 0===e?null:e.birthday),1)]})),_:1}),null==(null===(e=c(u))||void 0===e?null:e.birthday)?(r(),s(T,new UTSJSONObject({key:0,color:"info"}),new UTSJSONObject({default:o((()=>[b(f(c(t)("选择生日")),1)])),_:1}))):O("",!0)]})),_:1},8,["label"]),i(y,new UTSJSONObject({label:c(t)("地区"),hoverable:"",arrow:"",justify:"start",onClick:l[4]||(l[4]=(e=null)=>L("region"))}),{default:o((()=>[i(T,null,{default:o((()=>[b(f(I.value),1)])),_:1}),""==I.value?(r(),s(T,new UTSJSONObject({key:0,color:"info"}),new UTSJSONObject({default:o((()=>[b(f(c(t)("选择所在的地区")),1)])),_:1}))):O("",!0)])),_:1},8,["label"])])),_:1}),i(C,{title:c(t)("选择性别"),"model-value":null===(e=c(u))||void 0===e?null:e.gender,ref:c(F).set("gender"),options:A.value,"show-trigger":!1,onChange:E},null,8,["title","model-value","options"]),i(z,{title:c(t)("选择生日"),"model-value":null===(n=c(u))||void 0===n?null:n.birthday,ref:c(F).set("birthday"),type:"date",end:c(M),"show-trigger":!1,onChange:G},null,8,["title","model-value","end"]),i(Y,new UTSJSONObject({title:c(t)("选择所在的地区"),ref:c(F).set("region"),options:c(H),"show-trigger":!1,onChange:K}),null,8,["title","options"])]})),_:1})])),_:1})}}});export{D as default};
