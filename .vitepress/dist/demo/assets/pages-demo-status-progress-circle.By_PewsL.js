import{d as e,a4 as l,c as t,af as a,z as s,a5 as n,T as u,r as o,o as c,a as i,w as r,n as p,U as d,aA as m,e as S,_,b,W as v,H as f,u as O,x as w,q as h,aB as N,aC as T,aD as U,t as j}from"./index-utI040hk.js";import{r as g,a as x,c as y,d as J,b as z}from"./cl-page.uvue_vue_type_script_setup_true_lang.fA40QWeW.js";import{_ as k}from"./cl-switch.D2m-zvw7.js";import{_ as M,a as V}from"./cl-list.D_4mG1WC.js";import{D as C}from"./item.BWEnuJzD.js";import"./index.U6ITPUe7.js";import"./cl-collapse.BFQreZNL.js";import"./item.uvue_vue_type_style_index_0_scoped_f51a3be8_lang.CqP3ivIA.js";class A extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{className:{type:String,optional:!0},text:{type:"Unknown",optional:!0}}}}}constructor(e,l=A.get$UTSMetadata$(),t=!1){super(),this.__props__=UTS.UTSType.initProps(e,l,t),this.className=this.__props__.className,this.text=this.__props__.text,delete this.__props__}}const P=y(e(Object.assign({name:"cl-progress-circle"},{__name:"cl-progress-circle",props:{pt:{type:Object,default:()=>new UTSJSONObject({})},value:{type:Number,default:0},size:{type:Number,default:120},strokeWidth:{type:Number,default:8},color:{type:String,default:null},unColor:{type:String,default:null},showText:{type:Boolean,default:!0},unit:{type:String,default:"%"},startAngle:{type:Number,default:-Math.PI/2},clockwise:{type:Boolean,default:!0},duration:{type:Number,default:500}},setup(e,j){var y=j.expose;const J=e,z=l().proxy,k=t((()=>d(J.pt)));let M=null,V=null;const C="cl-progress-circle__".concat(a()),A=s(0);function P(){var e,l;if(null==V)return null;const t=J.size/2,a=J.size/2,s=(J.size-J.strokeWidth)/2;V.clearRect(0,0,J.size,J.size),T().devicePixelRatio,V.save();const n=(e,l,n)=>{if(null==V)return null;V.beginPath(),V.arc(t,a,s,e,l,!1),V.strokeStyle=n,V.lineWidth=J.strokeWidth,V.lineCap="round",V.lineJoin="round",V.stroke()};if(n(0,2*Math.PI,null!==(e=J.unColor)&&void 0!==e?e:S.value?U("surface-700"):U("surface-200")),A.value>0){const e=Math.max(0,Math.min(100,A.value))/100,t=J.startAngle+2*(J.clockwise?1:-1)*Math.PI*e;n(J.startAngle,t,null!==(l=J.color)&&void 0!==l?l:U("primary-500"))}}function W(e){const l=A.value,t=Date.now();!function a(){const s=Date.now()-t,n=Math.min(s/J.duration,1),u=1-Math.pow(1-n,3);A.value=Math.round(l+(e-l)*u),P(),n<1&&null!=M&&M.requestAnimationFrame((()=>{a()}))}()}return n((()=>{m({id:C,component:z,success:e=>{M=e,V=e.getContext("2d"),V.canvas.width=J.size,V.canvas.height=J.size,V.textBaseline="middle",V.textAlign="center",V.miterLimit=10,W(J.value)}}),u(t((()=>J.value)),(e=>{W(Math.max(0,Math.min(100,e)))}),{immediate:!0}),u(t((()=>[J.color,J.unColor,S.value])),(()=>{P()}))})),y(new UTSJSONObject({animate:W})),(l=null,t=null)=>{const a=N,s=g(o("cl-text"),x),n=_;return c(),i(n,new UTSJSONObject({class:p(["cl-progress-circle",[new UTSJSONObject({}),k.value.className]])}),{default:r((()=>[b(a,new UTSJSONObject({class:"cl-progress-circle__canvas",id:C,style:v({height:"".concat(J.size,"px"),width:"".concat(J.size,"px")})}),null,8,["style"]),f(l.$slots,"text",new UTSJSONObject({}),(()=>{var l;return[e.showText?(c(),i(s,{key:0,value:"".concat(A.value).concat(e.unit),pt:{className:O(w)(["absolute",null===(l=k.value.text)||void 0===l?null:l.className])}},null,8,["value","pt"])):h("",!0)]}),!0)])),_:3},8,["class"])}}})),[["__scopeId","data-v-9f1113e1"]]),W=e({__name:"progress-circle",setup(e){const l=s(!1),t=s(!0),a=s(!1),n=s(!1),u=s(70);function p(){u.value<100&&(u.value+=10)}function d(){u.value>0&&(u.value-=10)}return(e=null,s=null)=>{const m=g(o("cl-progress-circle"),P),S=g(o("cl-switch"),k),v=g(o("cl-list-item"),M),f=g(o("cl-button"),J),w=g(o("cl-list"),V),h=_,N=g(o("cl-page"),z);return c(),i(N,null,new UTSJSONObject({default:r((()=>[b(h,new UTSJSONObject({class:"p-3"}),{default:r((()=>[b(O(C),new UTSJSONObject({label:O(j)("自定义")}),{default:r((()=>[b(m,new UTSJSONObject({value:u.value,color:a.value?"red":null,"un-color":a.value?"#f7bfbf":null,size:l.value?80:120,"show-text":t.value,duration:n.value?200:500}),null,8,["value","color","un-color","size","show-text","duration"]),b(w,new UTSJSONObject({border:"",pt:new UTSJSONObject({className:"mt-5"})}),{default:r((()=>[b(v,new UTSJSONObject({label:O(j)("改个颜色")}),{default:r((()=>[b(S,new UTSJSONObject({modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=(e=null)=>a.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),b(v,new UTSJSONObject({label:O(j)("显示文本")}),{default:r((()=>[b(S,new UTSJSONObject({modelValue:t.value,"onUpdate:modelValue":s[1]||(s[1]=(e=null)=>t.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),b(v,new UTSJSONObject({label:O(j)("快一些")}),{default:r((()=>[b(S,new UTSJSONObject({modelValue:n.value,"onUpdate:modelValue":s[2]||(s[2]=(e=null)=>n.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),b(v,new UTSJSONObject({label:O(j)("显示文本")}),{default:r((()=>[b(f,new UTSJSONObject({type:"light",size:"small",icon:"add-line",onClick:p})),b(f,new UTSJSONObject({type:"light",size:"small",icon:"subtract-line",onClick:d}))])),_:1},8,["label"])])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}))}}});export{W as default};
