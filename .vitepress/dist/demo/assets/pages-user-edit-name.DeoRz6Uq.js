import{_ as e}from"./cl-topbar.BG7wi1vE.js";import{d as a,r as t,a as l,o as s,c as o,w as n,s as r,e as u,u as c,t as i,f as p,g as d,G as m,q as f,_ as b}from"./index-B0sNI6bc.js";import{o as O,r as S,_,d as j,b as v,u as N}from"./cl-page.uvue_vue_type_script_setup_true_lang.DkBO21O3.js";import{_ as w}from"./cl-input.2m8B8J15.js";import{_ as T}from"./cl-footer.BtXP57A7.js";import"./form.CuRntZWy.js";const U=a({__name:"edit-name",setup(a){const U=N(),g=r().user,J=t("");function h(){return m(this,void 0,void 0,(function*(){if(J.value.length<2||J.value.length>20)return U.showToast({message:i("昵称长度需在2-20个字符之间")}),Promise.resolve(null);if(!/^[^@<>\/]*$/.test(J.value))return U.showToast({message:i("昵称不能包含@<>/等特殊字符")}),Promise.resolve(null);yield g.update({nickName:J.value}),f.back()}))}return O((()=>{var e;J.value=null!==(e=g.info.nickName)&&void 0!==e?e:""})),(a=null,t=null)=>{const r=S(l("cl-topbar"),e),m=S(l("cl-text"),_),f=S(l("cl-input"),w),O=b,N=S(l("cl-button"),j),U=S(l("cl-footer"),T),g=S(l("cl-page"),v);return s(),o(g,null,new UTSJSONObject({default:n((()=>[u(r,new UTSJSONObject({"safe-area-top":"",title:c(i)("编辑昵称"),"background-color":"transparent"}),null,8,["title"]),u(O,new UTSJSONObject({class:"p-3"}),{default:n((()=>[u(f,new UTSJSONObject({modelValue:J.value,"onUpdate:modelValue":t[0]||(t[0]=(e=null)=>J.value=e),autofocus:"",placeholder:c(i)("请输入昵称"),border:!1,pt:new UTSJSONObject({className:"-important-h--bracket-start-80rpx-bracket-end-"})}),{append:n((()=>[u(m,new UTSJSONObject({color:"info",pt:new UTSJSONObject({className:"-important-text-sm ml-2"})}),{default:n((()=>[p(d(J.value.length)+"/20",1)])),_:1})])),_:1},8,["modelValue","placeholder"]),u(O,new UTSJSONObject({class:"p-3"}),{default:n((()=>[u(m,new UTSJSONObject({color:"info",pt:new UTSJSONObject({className:"-important-text-sm"})}),{default:n((()=>[p(d(c(i)("请设置2-20个字符，不包括@<>/等无效字符")),1)])),_:1})])),_:1})])),_:1}),u(U,null,{default:n((()=>[u(N,new UTSJSONObject({size:"large",disabled:""==J.value,onClick:h}),{default:n((()=>[p(d(c(i)("确认")),1)])),_:1},8,["disabled"])])),_:1})])),_:1}))}}});export{U as default};
