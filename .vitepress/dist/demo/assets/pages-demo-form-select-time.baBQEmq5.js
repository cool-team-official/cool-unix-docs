import{_ as e}from"./cl-select-trigger.DF-0QJ7I.js";import{d as l,t,r as a,h as u,X as n,a as o,o as s,l as p,c as r,x as c,e as i,w as d,F as m,Y as S,S as _,f,g as b,a7 as v,T as O,_ as T,a8 as h,M as U,u as w}from"./index-CNagV5B9.js";import{r as g,d as j,f as N,c as y,b as J,u as V}from"./cl-page.uvue_vue_type_script_setup_true_lang.Dujw6vu5.js";import{_ as x}from"./cl-picker-view.Cn22dhwu.js";import{_ as k}from"./cl-switch.CYfHNfMX.js";import{_ as C}from"./cl-list-item.D9Fwhzfd.js";import{_ as $}from"./cl-list.DqrUvrrm.js";import{D as H}from"./item.BgF8i6G3.js";import"./form.psaMSS8r.js";import"./index.U6ITPUe7.js";import"./cl-collapse.S3OdLei1.js";import"./item.uvue_vue_type_style_index_0_scoped_b08ace3b_lang.LX4ndQdB.js";class F extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{trigger:{type:"Unknown",optional:!0},popup:{type:"Unknown",optional:!0}}}}}constructor(e,l=F.get$UTSMetadata$(),t=!1){super(),this.__props__=UTS.UTSType.initProps(e,l,t),this.trigger=this.__props__.trigger,this.popup=this.__props__.popup,delete this.__props__}}const M=y(l(Object.assign({name:"cl-select-time"},{__name:"cl-select-time",props:{pt:{type:Object,default:()=>new UTSJSONObject({})},modelValue:{type:String,default:""},headers:{type:Array,default:()=>[t("小时"),t("分钟"),t("秒数")]},type:{type:String,default:"second"},title:{type:String,default:()=>t("请选择")},placeholder:{type:String,default:()=>t("请选择")},showTrigger:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},confirmText:{type:String,default:()=>t("确定")},showConfirm:{type:Boolean,default:!0},cancelText:{type:String,default:()=>t("取消")},showCancel:{type:Boolean,default:!0},labelFormat:{type:String,default:null}},emits:["update:modelValue","change"],setup(l,t){var U=t.expose,w=t.emit;const y=l,J=w,V=a(null),k=u((()=>S(y.pt))),C=u((()=>null!=y.labelFormat?y.labelFormat:"hour"==y.type?"{H}":"minute"==y.type?"{H}:{m}":"{H}:{m}:{s}")),$=a([]),H=a([]),F=u((()=>{const e=[[],[],[]];for(let l=0;l<60;l++){const t=l.toString().padStart(2,"0"),a={label:t,value:t};l<24&&e[0].push(a),e[1].push(a),e[2].push(a)}return e})),M=u((()=>["hour","minute","second"].findIndex((e=>e==y.type))+1)),B=u((()=>F.value.slice(0,M.value))),I=a("");function z(){const e=y.modelValue;if(v(e)||O(e))I.value="";else{const l=h(e.split(":"),3),t=l[0],a=l[1],u=l[2];I.value=C.value.replace("{H}",t).replace("{m}",a).replace("{s}",u)}}function P(e){let l;l=v(e)||O(e)?[]:e.split(":");let t=[];for(let a=0;a<3;a++)if(a>=l.length)t.push(0),l.push(F.value[a][0].value);else{let e=F.value[a].findIndex((e=>e.value==l[a]));e<0&&(e=0),t.push(e)}$.value=l,H.value=t,z()}function R(e){const l=[...H.value];for(let t=0;t<e.length;t++)l[t]!=e[t]&&(l[t]=e[t]);H.value=l,$.value=l.map(((e,l)=>F.value[l][e].value))}const A=a(!1);let D=null;function K(e=null){if(y.disabled)return null;A.value=!0,P(y.modelValue),D=e}function L(){A.value=!1}function X(){I.value="",J("update:modelValue",""),J("change","")}function Y(){const e=$.value.join(":");J("update:modelValue",e),J("change",e),null!=D&&D(e),L()}return n(u((()=>y.modelValue)),(e=>{P(e)}),{immediate:!0}),n(u((()=>[y.labelFormat,y.type])),(()=>{z()})),U(new UTSJSONObject({open:K,close:L})),(t=null,a=null)=>{var u,n,S,v,O,h,U,w;const y=g(o("cl-select-trigger"),e),J=g(o("cl-picker-view"),x),C=T,$=g(o("cl-button"),j),F=g(o("cl-popup"),N);return s(),p(m,null,[l.showTrigger?(s(),r(y,{key:0,pt:{className:null===(u=k.value.trigger)||void 0===u?null:u.className,icon:null===(n=k.value.trigger)||void 0===n?null:n.icon},placeholder:l.placeholder,disabled:l.disabled,focus:null===(S=V.value)||void 0===S?null:S.isOpen,text:I.value,"arrow-icon":"time-line",onOpen:a[0]||(a[0]=(e=null)=>K()),onClear:X},null,8,["pt","placeholder","disabled","focus","text"])):c("",!0),i(F,{ref_key:"popupRef",ref:V,modelValue:A.value,"onUpdate:modelValue":a[2]||(a[2]=(e=null)=>A.value=e),title:l.title,pt:{className:null===(v=k.value.popup)||void 0===v?null:v.className,header:null===(O=k.value.popup)||void 0===O?null:O.header,container:null===(h=k.value.popup)||void 0===h?null:h.container,mask:null===(U=k.value.popup)||void 0===U?null:U.mask,draw:null===(w=k.value.popup)||void 0===w?null:w.draw}},{default:d((()=>[i(C,new UTSJSONObject({class:"cl-select-popup",onTouchmove:a[1]||(a[1]=_((()=>{}),["stop"]))}),{default:d((()=>[i(C,new UTSJSONObject({class:"cl-select-popup__picker"}),{default:d((()=>[i(J,new UTSJSONObject({value:H.value,headers:l.headers,columns:B.value,"reset-on-change":!1,onChangeIndex:R}),null,8,["value","headers","columns"])])),_:1}),i(C,new UTSJSONObject({class:"cl-select-popup__op"}),{default:d((()=>[l.showCancel?(s(),r($,new UTSJSONObject({key:0,size:"large",text:"",border:"",type:"light",pt:new UTSJSONObject({className:"flex-1 -important-rounded-xl h--bracket-start-80rpx-bracket-end-"}),onClick:L}),new UTSJSONObject({default:d((()=>[f(b(l.cancelText),1)])),_:1}))):c("",!0),l.showConfirm?(s(),r($,new UTSJSONObject({key:1,size:"large",pt:new UTSJSONObject({className:"flex-1 -important-rounded-xl h--bracket-start-80rpx-bracket-end-"}),onClick:Y}),new UTSJSONObject({default:d((()=>[f(b(l.confirmText),1)])),_:1}))):c("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue","title","pt"])],64)}}})),[["__scopeId","data-v-82658520"]]);class B extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{time1:{type:String,optional:!1},time2:{type:String,optional:!1},time3:{type:String,optional:!1}}}}}constructor(e,l=B.get$UTSMetadata$(),t=!1){super(),this.__props__=UTS.UTSType.initProps(e,l,t),this.time1=this.__props__.time1,this.time2=this.__props__.time2,this.time3=this.__props__.time3,delete this.__props__}}const I=l({__name:"select-time",setup(e){const l=V(),n=U(new B({time1:"",time2:"",time3:""})),p=a(!1),c=a(!1),m=a(!1),S=a(!1),_=a(!0),v=a(null);function O(){v.value.open((e=>{l.showToast({message:"你选择了：".concat(e)})}))}const h=u((()=>m.value?"hour":S.value?"minute":"second")),N=u((()=>{if(!c.value)return null;switch(h.value){case"hour":return"{H}时";case"minute":return"{H}时{m}分";case"second":return"{H}时{m}分{s}秒";default:return null}}));return(e=null,l=null)=>{const a=g(o("cl-select-time"),M),u=g(o("cl-button"),j),U=T,y=g(o("cl-switch"),k),V=g(o("cl-list-item"),C),x=g(o("cl-list"),$),F=g(o("cl-page"),J);return s(),r(F,null,new UTSJSONObject({default:d((()=>[i(U,new UTSJSONObject({class:"p-3"}),{default:d((()=>[i(w(H),new UTSJSONObject({label:w(t)("基础用法")}),{default:d((()=>[i(a,new UTSJSONObject({modelValue:n.time1,"onUpdate:modelValue":l[0]||(l[0]=(e=null)=>n.time1=e)}),null,8,["modelValue"])])),_:1},8,["label"]),i(w(H),new UTSJSONObject({label:w(t)("自定义触发器")}),{default:d((()=>[i(U,new UTSJSONObject({class:"flex flex-row"}),{default:d((()=>[i(u,new UTSJSONObject({onClick:O}),{default:d((()=>[f(b(w(t)("打开选择器")),1)])),_:1})])),_:1}),i(a,new UTSJSONObject({ref_key:"selectRef2",ref:v,modelValue:n.time2,"onUpdate:modelValue":l[1]||(l[1]=(e=null)=>n.time2=e),"show-trigger":!1}),null,8,["modelValue"])])),_:1},8,["label"]),i(w(H),new UTSJSONObject({label:w(t)("自定义")}),{default:d((()=>[i(a,new UTSJSONObject({modelValue:n.time3,"onUpdate:modelValue":l[2]||(l[2]=(e=null)=>n.time3=e),disabled:p.value,"label-format":N.value,type:h.value}),null,8,["modelValue","disabled","label-format","type"]),i(x,new UTSJSONObject({border:"",pt:new UTSJSONObject({className:"mt-3"})}),{default:d((()=>[i(V,new UTSJSONObject({label:w(t)("时")}),{default:d((()=>[i(y,new UTSJSONObject({modelValue:m.value,"onUpdate:modelValue":l[3]||(l[3]=(e=null)=>m.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),i(V,new UTSJSONObject({label:w(t)("时:分")}),{default:d((()=>[i(y,new UTSJSONObject({modelValue:S.value,"onUpdate:modelValue":l[4]||(l[4]=(e=null)=>S.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),i(V,new UTSJSONObject({label:w(t)("时:分:秒")}),{default:d((()=>[i(y,new UTSJSONObject({modelValue:_.value,"onUpdate:modelValue":l[5]||(l[5]=(e=null)=>_.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),i(V,new UTSJSONObject({label:w(t)("标签格式化")}),{default:d((()=>[i(y,new UTSJSONObject({modelValue:c.value,"onUpdate:modelValue":l[6]||(l[6]=(e=null)=>c.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),i(V,new UTSJSONObject({label:w(t)("禁用")}),{default:d((()=>[i(y,new UTSJSONObject({modelValue:p.value,"onUpdate:modelValue":l[7]||(l[7]=(e=null)=>p.value=e)}),null,8,["modelValue"])])),_:1},8,["label"])])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}))}}});export{I as default};
