import{d as e,a4 as l,c as a,z as t,T as n,a5 as u,r as s,o as c,a as i,w as o,n as r,U as m,a6 as d,_ as p,b as v,W as b,q as S,j as _,F as O,O as h,u as U,x as f,f as N,g as T,a7 as w,E as g,V as j,t as y}from"./index-utI040hk.js";import{r as x,a as J,c as V,b as k}from"./cl-page.uvue_vue_type_script_setup_true_lang.fA40QWeW.js";import{_ as M}from"./cl-switch.D2m-zvw7.js";import{_ as z,a as $}from"./cl-list.D_4mG1WC.js";import{D as P}from"./item.BWEnuJzD.js";import"./index.U6ITPUe7.js";import"./cl-collapse.BFQreZNL.js";import"./item.uvue_vue_type_style_index_0_scoped_f51a3be8_lang.CqP3ivIA.js";class B extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{className:{type:String,optional:!0},track:{type:"Unknown",optional:!0},progress:{type:"Unknown",optional:!0},thumb:{type:"Unknown",optional:!0},value:{type:"Unknown",optional:!0}}}}}constructor(e,l=B.get$UTSMetadata$(),a=!1){super(),this.__props__=UTS.UTSType.initProps(e,l,a),this.className=this.__props__.className,this.track=this.__props__.track,this.progress=this.__props__.progress,this.thumb=this.__props__.thumb,this.value=this.__props__.value,delete this.__props__}}class H extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{min:{type:Number,optional:!1},max:{type:Number,optional:!1}}}}}constructor(e,l=H.get$UTSMetadata$(),a=!1){super(),this.__props__=UTS.UTSType.initProps(e,l,a),this.min=this.__props__.min,this.max=this.__props__.max,delete this.__props__}}const X=V(e(Object.assign({name:"cl-slider"},{__name:"cl-slider",props:{pt:{type:Object,default:()=>new UTSJSONObject({})},modelValue:{type:Number,default:0},values:{type:Array,default:()=>[0,0]},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1},blockSize:{type:Number,default:40},trackHeight:{type:Number,default:8},showValue:{type:Boolean,default:!1},range:{type:Boolean,default:!1}},emits:["update:modelValue","update:values","change","changing"],setup(e,y){var V=y.emit;const k=e,M=V,z=l().proxy,$=a((()=>m(k.pt))),P=t(k.modelValue),B=t([...k.values]),X=t(0),q=t(0),A=t(0),C=a((()=>k.range?0:(P.value-k.min)/(k.max-k.min)*100)),D=a((()=>{if(!k.range)return new H({min:0,max:0});const e=B.value,l=k.max-k.min,a=(e[0]-k.min)/l*100,t=(e[1]-k.min)/l*100;return new H({min:a,max:t})})),E=a((()=>{const e=new UTSJSONObject({});if(k.range){const l=D.value,a=l.min,t=l.max;e.left="".concat(a,"%"),e.width="".concat(t-a,"%")}else e.width="".concat(C.value,"%");return e}));function F(e){const l=new UTSJSONObject({}),a=X.value-w(k.blockSize)+1,t=e/100*a,n=Math.max(0,Math.min(a,t));return l.left="".concat(n,"px"),l.width="".concat(w(k.blockSize),"px"),l.height="".concat(w(k.blockSize),"px"),l}const I=a((()=>F(C.value))),R=a((()=>F(D.value.min))),W=a((()=>F(D.value.max))),G=a((()=>{if(k.range){const e=B.value;return"".concat(e[0]," - ").concat(e[1])}return"".concat(P.value)}));function K(){return new Promise((e=>{d().in(z).select(".cl-slider__track").boundingClientRect(((l=null)=>{var a,t;X.value=null!==(a=l.width)&&void 0!==a?a:0,q.value=null!==(t=l.left)&&void 0!==t?t:0,e()})).exec()}))}function L(e){if(0==X.value)return k.min;const l=e-q.value,a=Math.max(0,Math.min(1,l/X.value)),t=k.max-k.min;let n=k.min+a*t;return k.step>0&&(n=Math.round((n-k.min)/k.step)*k.step+k.min),Math.max(k.min,Math.min(k.max,n))}function Q(e){if(k.range){const l=e,a=B.value;l[0]>l[1]&&(A.value=1-A.value);const t=[Math.min(l[0],l[1]),Math.max(l[0],l[1])];UTS.JSON.stringify(a)!==UTS.JSON.stringify(t)&&(B.value=t,M("update:values",t),M("changing",t))}else{const l=e;P.value!==l&&(P.value=l,M("update:modelValue",l),M("changing",l))}}function Y(e){return g(this,void 0,void 0,(function*(){if(k.disabled)return Promise.resolve(null);yield K(),j((()=>{const l=e.touches[0].clientX,a=L(l);if(k.range){A.value=function(e){if(!k.range)return 0;const l=B.value,a=L(e);return Math.abs(a-l[0])<=Math.abs(a-l[1])?0:1}(l);const e=[...B.value];e[A.value]=a,Q(e)}else Q(a)}))}))}function Z(e){if(k.disabled)return null;const l=L(e.touches[0].clientX);if(k.range){const e=[...B.value];e[A.value]=l,Q(e)}else Q(l)}function ee(){if(k.disabled)return null;k.range?M("change",B.value):M("change",P.value)}return n(a((()=>k.modelValue)),(e=>{e!==P.value&&(P.value=Math.max(k.min,Math.min(k.max,e)))}),{immediate:!0}),n(a((()=>k.values)),(e=>{B.value=e.map((e=>Math.max(k.min,Math.min(k.max,e))))}),{immediate:!0}),n(a((()=>k.max)),(e=>{if(k.range){const l=B.value;(l[0]>e||l[1]>e)&&Q([Math.min(l[0],e),Math.min(l[1],e)])}else{P.value>e&&Q(e)}}),{immediate:!0}),n(a((()=>k.min)),(e=>{if(k.range){const l=B.value;(l[0]<e||l[1]<e)&&Q([Math.max(l[0],e),Math.max(l[1],e)])}else{P.value<e&&Q(e)}}),{immediate:!0}),u((()=>{n(a((()=>[k.showValue])),(()=>{j((()=>{K()}))})),K()})),(l=null,a=null)=>{const t=p,n=x(s("cl-text"),J);return c(),i(t,new UTSJSONObject({class:r(["cl-slider",[new UTSJSONObject({}),new UTSJSONObject({"cl-slider--disabled":e.disabled}),$.value.className]])}),{default:o((()=>{var l;return[v(t,new UTSJSONObject({class:"cl-slider__inner",style:b({height:e.blockSize+"rpx"})}),{default:o((()=>{var l;return[v(t,{class:r(["cl-slider__track",[new UTSJSONObject({}),null===(l=$.value.track)||void 0===l?null:l.className]]),style:b({height:e.trackHeight+"rpx"})},{default:o((()=>{var l,a,n,u;return[v(t,{class:r(["cl-slider__progress",[new UTSJSONObject({}),null===(l=$.value.progress)||void 0===l?null:l.className]]),style:b(E.value)},null,8,["class","style"]),e.range?S("",!0):(c(),i(t,{key:0,class:r(["cl-slider__thumb",[new UTSJSONObject({}),null===(a=$.value.thumb)||void 0===a?null:a.className]]),style:b(I.value)},null,8,["class","style"])),e.range?(c(),_(O,new UTSJSONObject({key:1}),[v(t,{class:r(["cl-slider__thumb cl-slider__thumb--min",[new UTSJSONObject({}),null===(n=$.value.thumb)||void 0===n?null:n.className]]),style:b(R.value)},null,8,["class","style"]),v(t,{class:r(["cl-slider__thumb cl-slider__thumb--max",[new UTSJSONObject({}),null===(u=$.value.thumb)||void 0===u?null:u.className]]),style:b(W.value)},null,8,["class","style"])],64)):S("",!0)]})),_:1},8,["class","style"]),v(t,new UTSJSONObject({class:"cl-slider__picker",style:b({height:1.5*e.blockSize+"rpx"}),onTouchstart:h(Y,["prevent"]),onTouchmove:h(Z,["prevent"]),onTouchend:ee,onTouchcancel:ee}),null,8,["style"])]})),_:1},8,["style"]),e.showValue?(c(),i(n,{key:0,pt:{className:U(f)(["text-center w--bracket-start-100rpx-bracket-end-",null===(l=$.value.value)||void 0===l?null:l.className])}},new UTSJSONObject({default:o((()=>[N(T(G.value),1)])),_:1}),8,["pt"])):S("",!0)]})),_:1},8,["class"])}}})),[["__scopeId","data-v-a2cf611e"]]),q=e({__name:"slider",setup(e){const l=t(60),a=t([10,20]),n=t(35),u=t(!1),r=t(!0),m=t(!1),d=t(!1),b=t(!1),S=t(!1);return(e=null,t=null)=>{const _=x(s("cl-slider"),X),O=x(s("cl-text"),J),h=x(s("cl-switch"),M),f=x(s("cl-list-item"),z),w=x(s("cl-list"),$),g=p,j=x(s("cl-page"),k);return c(),i(j,null,new UTSJSONObject({default:o((()=>[v(g,new UTSJSONObject({class:"p-3"}),{default:o((()=>[v(U(P),new UTSJSONObject({label:U(y)("基础用法")}),{default:o((()=>[v(_,new UTSJSONObject({modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=(e=null)=>l.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),v(U(P),new UTSJSONObject({label:U(y)("范围选择")}),{default:o((()=>[v(O,new UTSJSONObject({pt:new UTSJSONObject({className:"mb-3"})}),{default:o((()=>[N(T(a.value[0])+" ～ "+T(a.value[1]),1)])),_:1}),v(_,new UTSJSONObject({values:a.value,"onUpdate:values":t[1]||(t[1]=(e=null)=>a.value=e),range:""}),null,8,["values"])])),_:1},8,["label"]),v(U(P),new UTSJSONObject({label:U(y)("自定义")}),{default:o((()=>[v(_,new UTSJSONObject({modelValue:n.value,"onUpdate:modelValue":t[2]||(t[2]=(e=null)=>n.value=e),disabled:u.value,"show-value":r.value,"block-size":d.value?50:40,"track-height":d.value?12:8,step:m.value?10:1,max:b.value?50:100,pt:new UTSJSONObject({thumb:new UTSJSONObject({className:S.value?"-important-bg-red-500":""}),progress:new UTSJSONObject({className:S.value?"-important-bg-red-200":""})})}),null,8,["modelValue","disabled","show-value","block-size","track-height","step","max","pt"]),v(w,new UTSJSONObject({border:"",pt:new UTSJSONObject({className:"mt-3"})}),{default:o((()=>[v(f,new UTSJSONObject({label:U(y)("显示值")}),{default:o((()=>[v(h,new UTSJSONObject({modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=(e=null)=>r.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),v(f,new UTSJSONObject({label:U(y)("步长10")}),{default:o((()=>[v(h,new UTSJSONObject({modelValue:m.value,"onUpdate:modelValue":t[4]||(t[4]=(e=null)=>m.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),v(f,new UTSJSONObject({label:U(y)("滑块大点")}),{default:o((()=>[v(h,new UTSJSONObject({modelValue:d.value,"onUpdate:modelValue":t[5]||(t[5]=(e=null)=>d.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),v(f,new UTSJSONObject({label:U(y)("换个颜色")}),{default:o((()=>[v(h,new UTSJSONObject({modelValue:S.value,"onUpdate:modelValue":t[6]||(t[6]=(e=null)=>S.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),v(f,new UTSJSONObject({label:U(y)("最大50")}),{default:o((()=>[v(h,new UTSJSONObject({modelValue:b.value,"onUpdate:modelValue":t[7]||(t[7]=(e=null)=>b.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),v(f,new UTSJSONObject({label:U(y)("禁用")}),{default:o((()=>[v(h,new UTSJSONObject({modelValue:u.value,"onUpdate:modelValue":t[8]||(t[8]=(e=null)=>u.value=e)}),null,8,["modelValue"])])),_:1},8,["label"])])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}))}}});export{q as default};
