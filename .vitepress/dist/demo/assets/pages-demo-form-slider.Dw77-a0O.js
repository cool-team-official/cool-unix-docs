import{d as e,a4 as l,c as a,z as t,T as s,a5 as u,r as n,o as c,a as o,w as i,n as d,U as r,a6 as m,_ as p,b,W as _,u as S,v,f as O,j as h,p as f,V as w,t as U}from"./index-DH23VVp-.js";import{r as N,a as T,c as j,b as V}from"./cl-page.uvue_vue_type_script_setup_true_lang.B8PcFQeN.js";import{_ as x}from"./cl-switch.CGHTfetf.js";import{_ as y,a as J}from"./cl-list.BExPKBdU.js";import{D as k}from"./item.JCpgpelj.js";import"./index.U6ITPUe7.js";import"./cl-collapse.pZpIkgZm.js";import"./item.uvue_vue_type_style_index_0_scoped_f51a3be8_lang.Dl9fq3Ln.js";class g extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{className:{type:String,optional:!0},track:{type:"Unknown",optional:!0},progress:{type:"Unknown",optional:!0},thumb:{type:"Unknown",optional:!0},value:{type:"Unknown",optional:!0}}}}}constructor(e,l=g.get$UTSMetadata$(),a=!1){super(),this.__props__=UTS.UTSType.initProps(e,l,a),this.className=this.__props__.className,this.track=this.__props__.track,this.progress=this.__props__.progress,this.thumb=this.__props__.thumb,this.value=this.__props__.value,delete this.__props__}}const M=j(e(Object.assign({name:"cl-slider"},{__name:"cl-slider",props:{pt:{type:Object,default:()=>new UTSJSONObject({})},modelValue:{type:Number,default:0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},disabled:{type:Boolean,default:!1},blockSize:{type:Number,default:20},showValue:{type:Boolean,default:!1}},emits:["update:modelValue","change","changing"],setup(e,U){var j=U.emit;const V=e,x=j,y=l().proxy,J=a((()=>r(V.pt))),k=t(V.modelValue),g=t(0),M=t(0),z=a((()=>(k.value-V.min)/(V.max-V.min)*100)),$=a((()=>{const e=new Map;0==g.value&&(e.set("left","".concat(z.value,"%")),e.set("width","".concat(V.blockSize,"px")),e.set("height","".concat(V.blockSize,"px")),e.set("transform","translateX(-50%)"));const l=g.value-V.blockSize,a=z.value/100*l,t=Math.max(0,Math.min(l,a));return e.set("left","".concat(t,"px")),e.set("width","".concat(V.blockSize,"px")),e.set("height","".concat(V.blockSize,"px")),e}));function X(){m().in(y).select(".cl-slider__track").boundingClientRect(((e=null)=>{var l,a;g.value=null!==(l=e.width)&&void 0!==l?l:0,M.value=null!==(a=e.left)&&void 0!==a?a:0})).exec()}function B(e){if(0==g.value)return k.value;const l=e-M.value,a=Math.max(0,Math.min(1,l/g.value)),t=V.max-V.min;let s=V.min+a*t;return V.step>0&&(s=Math.round((s-V.min)/V.step)*V.step+V.min),Math.max(V.min,Math.min(V.max,s))}function D(e){e!==k.value&&(k.value=e,x("update:modelValue",e),x("changing",e))}function C(e){if(V.disabled)return null;X(),setTimeout((()=>{D(B(e.touches[0].clientX))}),10)}function I(e){if(V.disabled)return null;e.preventDefault();D(B(e.touches[0].clientX))}function P(){if(V.disabled)return null;x("change",k.value)}return s(a((()=>V.modelValue)),(e=>{e!==k.value&&(k.value=Math.max(V.min,Math.min(V.max,e)))}),{immediate:!0}),s(a((()=>V.max)),(e=>{k.value>e&&D(e)}),{immediate:!0}),s(a((()=>V.min)),(e=>{k.value<e&&D(e)}),{immediate:!0}),s(a((()=>V.showValue)),(()=>{w((()=>{X()}))})),u((()=>{X()})),(l=null,a=null)=>{const t=p,s=N(n("cl-text"),T);return c(),o(t,new UTSJSONObject({class:d(["cl-slider",[new UTSJSONObject({}),new UTSJSONObject({"cl-slider--disabled":e.disabled}),J.value.className]])}),{default:i((()=>{var l;return[b(t,new UTSJSONObject({class:"cl-slider__inner",style:_({height:e.blockSize+"px"})}),{default:i((()=>{var l;return[b(t,{class:d(["cl-slider__track",[new UTSJSONObject({}),null===(l=J.value.track)||void 0===l?null:l.className]])},{default:i((()=>{var e;return[b(t,new UTSJSONObject({class:"cl-slider__progress",style:_({width:z.value+"%"})}),null,8,["style"]),b(t,{class:d(["cl-slider__thumb",[new UTSJSONObject({}),null===(e=J.value.thumb)||void 0===e?null:e.className]]),style:_($.value)},null,8,["class","style"])]})),_:1},8,["class"]),b(t,new UTSJSONObject({class:"cl-slider__picker",style:_({height:1.5*e.blockSize+"px"}),onTouchstart:C,onTouchmove:I,onTouchend:P,onTouchcancel:P}),null,8,["style"])]})),_:1},8,["style"]),e.showValue?(c(),o(s,{key:0,pt:{className:S(v)(["text-center w--bracket-start-100rpx-bracket-end-",null===(l=J.value.value)||void 0===l?null:l.className])}},new UTSJSONObject({default:i((()=>[O(h(k.value),1)])),_:1}),8,["pt"])):f("",!0)]})),_:1},8,["class"])}}})),[["__scopeId","data-v-7ef86cf6"]]),z=e({__name:"slider",setup(e){const l=t(60),a=t(35),s=t(!1),u=t(!0),d=t(!1),r=t(!1),m=t(!1);return(e=null,t=null)=>{const _=N(n("cl-slider"),M),v=N(n("cl-switch"),x),O=N(n("cl-list-item"),y),h=N(n("cl-list"),J),f=p,w=N(n("cl-page"),V);return c(),o(w,null,new UTSJSONObject({default:i((()=>[b(f,new UTSJSONObject({class:"p-3"}),{default:i((()=>[b(S(k),new UTSJSONObject({label:S(U)("基础用法")}),{default:i((()=>[b(_,new UTSJSONObject({modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=(e=null)=>l.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),b(S(k),new UTSJSONObject({label:S(U)("自定义")}),{default:i((()=>[b(_,new UTSJSONObject({modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=(e=null)=>a.value=e),disabled:s.value,"show-value":u.value,"block-size":r.value?26:20,step:d.value?10:1,max:m.value?50:100}),null,8,["modelValue","disabled","show-value","block-size","step","max"]),b(h,new UTSJSONObject({border:"",pt:new UTSJSONObject({className:"mt-3"})}),{default:i((()=>[b(O,new UTSJSONObject({label:S(U)("显示值")}),{default:i((()=>[b(v,new UTSJSONObject({modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=(e=null)=>u.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),b(O,new UTSJSONObject({label:S(U)("步长10")}),{default:i((()=>[b(v,new UTSJSONObject({modelValue:d.value,"onUpdate:modelValue":t[3]||(t[3]=(e=null)=>d.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),b(O,new UTSJSONObject({label:S(U)("滑块大点")}),{default:i((()=>[b(v,new UTSJSONObject({modelValue:r.value,"onUpdate:modelValue":t[4]||(t[4]=(e=null)=>r.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),b(O,new UTSJSONObject({label:S(U)("最大50")}),{default:i((()=>[b(v,new UTSJSONObject({modelValue:m.value,"onUpdate:modelValue":t[5]||(t[5]=(e=null)=>m.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),b(O,new UTSJSONObject({label:S(U)("禁用")}),{default:i((()=>[b(v,new UTSJSONObject({modelValue:s.value,"onUpdate:modelValue":t[6]||(t[6]=(e=null)=>s.value=e)}),null,8,["modelValue"])])),_:1},8,["label"])])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}))}}});export{z as default};
