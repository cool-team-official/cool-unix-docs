import{r as e,a as l,c as a}from"./cl-page.uvue_vue_type_script_setup_true_lang.BYryoqR_.js";import{aA as t,d as s,h as n,r as u,U as o,a as i,o as p,c as r,w as c,i as d,V as m,_ as v,e as _,n as h,u as T,W as b,X as S}from"./index-C9No-3tr.js";import{_ as y}from"./cl-input.K5De0Fv8.js";import{u as N}from"./form.D4AfNkl8.js";import{v as f}from"./index.U6ITPUe7.js";class U extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{className:{type:String,optional:!0},input:{type:"Unknown",optional:!0}}}}}constructor(e,l=U.get$UTSMetadata$(),a=!1){super(),this.__props__=UTS.UTSType.initProps(e,l,a),this.className=this.__props__.className,this.input=this.__props__.input,delete this.__props__}}class g extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{className:{type:String,optional:!0},minus:{type:"Unknown",optional:!0},plus:{type:"Unknown",optional:!0},icon:{type:"Unknown",optional:!0}}}}}constructor(e,l=g.get$UTSMetadata$(),a=!1){super(),this.__props__=UTS.UTSType.initProps(e,l,a),this.className=this.__props__.className,this.minus=this.__props__.minus,this.plus=this.__props__.plus,this.icon=this.__props__.icon,delete this.__props__}}class O extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{className:{type:String,optional:!0},value:{type:U,optional:!0},op:{type:g,optional:!0}}}}}constructor(e,l=O.get$UTSMetadata$(),a=!1){super(),this.__props__=UTS.UTSType.initProps(e,l,a),this.className=this.__props__.className,this.value=this.__props__.value,this.op=this.__props__.op,delete this.__props__}}const w=a(s(Object.assign({name:"cl-input-number"},{__name:"cl-input-number",props:{modelValue:{type:Number,default:0},pt:{type:Object,default:()=>new UTSJSONObject({})},placeholder:{type:String,default:""},step:{type:Number,default:1},max:{type:Number,default:100},min:{type:Number,default:0},inputType:{type:String,default:"number"},inputable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},size:{type:[Number,String],default:50}},emits:["update:modelValue","change"],setup(a,s){var U=s.emit;const g=a,O=U,w=(()=>{let e=0,l=0,a=!1;const s=()=>{0!=e&&(clearTimeout(e),e=0),0!=l&&(clearInterval(l),l=0),a=!1};return t((()=>{s()})),{start:t=>{s(),t(),e=setTimeout((()=>{f(1),a=!0,l=setInterval((()=>{t()}),100)}),500)},stop:()=>{s()},clear:s,isPressing:a}})(),x=N().disabled,j=n((()=>x.value||g.disabled)),$=n((()=>m(g.pt))),z=u(g.modelValue),k=n((()=>!j.value&&z.value<g.max)),J=n((()=>!j.value&&z.value>g.min));function V(){S((()=>{let e=z.value;e<g.min&&(e=g.min),e>g.max&&(e=g.max),g.min>g.max&&(e=g.max),"digit"==g.inputType&&(e=parseFloat(e.toFixed(2))),z.value=e,e!=g.modelValue&&(O("update:modelValue",e),O("change",e))}))}function M(){if(j.value||!k.value)return null;w.start((()=>{if(k.value){const e=g.max-z.value;z.value+=e>g.step?g.step:e,V()}}))}function P(){if(j.value||!J.value)return null;w.start((()=>{if(J.value){const e=z.value-g.min;z.value-=e>g.step?g.step:e,V()}}))}function B(e){""==e.detail.value?z.value=0:z.value=parseFloat(e.detail.value),V()}return o(n((()=>g.modelValue)),(e=>{z.value=e,V()}),{immediate:!0}),o(n((()=>g.max)),V),o(n((()=>g.min)),V),(t=null,s=null)=>{const n=e(i("cl-icon"),l),u=v,o=e(i("cl-input"),y);return p(),r(u,new UTSJSONObject({class:d(["cl-input-number",[new UTSJSONObject({}),new UTSJSONObject({"cl-input-number--disabled":j.value}),$.value.className]])}),{default:c((()=>{var e,l,t,s,i,p;return[_(u,{class:d(["cl-input-number__minus",[new UTSJSONObject({}),new UTSJSONObject({"is-disabled":!J.value}),null===(e=$.value.op)||void 0===e?null:e.className,null===(t=null===(l=$.value.op)||void 0===l?null:l.minus)||void 0===t?null:t.className]]),"hover-class":"-important-bg-surface-200","hover-stay-time":50,style:h({height:T(b)(a.size),width:T(b)(a.size)}),onTouchstart:P,onTouchend:T(w).stop,onTouchcancel:T(w).stop},{default:c((()=>{var e,l,a,t,s,u,o,i;return[_(n,{name:"subtract-line",size:null!==(a=null===(l=null===(e=$.value.op)||void 0===e?null:e.icon)||void 0===l?null:l.size)&&void 0!==a?a:36,color:null!==(u=null===(s=null===(t=$.value.op)||void 0===t?null:t.icon)||void 0===s?null:s.color)&&void 0!==u?u:"info",pt:{className:null===(i=null===(o=$.value.op)||void 0===o?null:o.icon)||void 0===i?null:i.className}},null,8,["size","color","pt"])]})),_:1},8,["class","style","onTouchend","onTouchcancel"]),_(u,new UTSJSONObject({class:"cl-input-number__value"}),{default:c((()=>{var e,l,t;return[_(o,{"model-value":"".concat(z.value),type:a.inputType,disabled:j.value,clearable:!1,readonly:0==a.inputable,placeholder:a.placeholder,"hold-keyboard":!1,pt:{className:"-important-h-full w--bracket-start-120rpx-bracket-end- ".concat(null===(e=$.value.value)||void 0===e?null:e.className),inner:{className:"text-center ".concat(null===(t=null===(l=$.value.value)||void 0===l?null:l.input)||void 0===t?null:t.className)}},onBlur:B},null,8,["model-value","type","disabled","readonly","placeholder","pt"])]})),_:1}),_(u,{class:d(["cl-input-number__plus",[new UTSJSONObject({}),new UTSJSONObject({"is-disabled":!k.value}),null===(s=$.value.op)||void 0===s?null:s.className,null===(p=null===(i=$.value.op)||void 0===i?null:i.plus)||void 0===p?null:p.className]]),"hover-class":"-important-bg-primary-600","hover-stay-time":50,style:h({height:T(b)(a.size),width:T(b)(a.size)}),onTouchstart:M,onTouchend:T(w).stop,onTouchcancel:T(w).stop},{default:c((()=>{var e,l,a,t,s,u,o,i;return[_(n,{name:"add-line",size:null!==(a=null===(l=null===(e=$.value.op)||void 0===e?null:e.icon)||void 0===l?null:l.size)&&void 0!==a?a:36,color:null!==(u=null===(s=null===(t=$.value.op)||void 0===t?null:t.icon)||void 0===s?null:s.color)&&void 0!==u?u:"white",pt:{className:null===(i=null===(o=$.value.op)||void 0===o?null:o.icon)||void 0===i?null:i.className}},null,8,["size","color","pt"])]})),_:1},8,["class","style","onTouchend","onTouchcancel"])]})),_:1},8,["class"])}}})),[["__scopeId","data-v-eb837d65"]]);export{w as _};
