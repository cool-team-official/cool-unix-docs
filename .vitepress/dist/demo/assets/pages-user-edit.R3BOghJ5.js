import{d as e,r as t,t as l,h as a,a as s,o,c as n,w as r,e as i,u as c,q as u,f,g as b,v as d,s as O,E as S,_ as m}from"./index-CVBPP8er.js";import{_ as j}from"./cl-avatar.uvue_vue_type_script_setup_true_lang.C_9JGV9l.js";import{r as p,a as w,_,b as N,u as T}from"./cl-page.uvue_vue_type_script_setup_true_lang.SFzc29x8.js";import{_ as U}from"./cl-list-item.BesELr6t.js";import{_ as g}from"./cl-list.DJVIqdlf.js";import{_ as v}from"./cl-select.B3au4yas.js";import{_ as J}from"./cl-select-date.DghFaW_z.js";import{p as h,_ as y}from"./pca.L7Afa2Vn.js";import{u as k}from"./cl-list-view.YHLUrGZ5.js";import{u as x}from"./refs.DXb5AnbP.js";import{d as C}from"./day.DRenYkEI.js";import{u as z}from"./index.D8Xow_9t.js";import"./cl-image.D8jjFIVc.js";import"./cl-collapse.CcOdTkWn.js";import"./cl-select-trigger.B76a7y7O.js";import"./form.CyvXoDOu.js";import"./cl-picker-view.j7X_3WeH.js";import"./cl-tag.DXww1OMi.js";import"./cl-empty.CHSrb31Z.js";const Y=e({__name:"edit",setup(e){const Y=O().user,q=T(),D=x(),M=C().format("YYYY-MM-DD"),A=t([{label:l("保密"),value:0},{label:l("男"),value:1},{label:l("女"),value:2}]),E=a((()=>[l("保密"),l("男"),l("女")][Y.info.gender]));function F(e){Y.update({gender:e}),q.showToast({message:l("性别设置成功")})}function B(e){Y.update({birthday:e}),q.showToast({message:l("生日设置成功")})}const G=k(h),H=a((()=>[Y.info.province,Y.info.city,Y.info.district].filter(((e=null)=>null!=e)).join(" - ")));function I(e){Y.update({province:e[0],city:e[1],district:e[2]}),q.showToast({message:l("地区设置成功")})}function K(e){D.open(e)}function L(e){S(new UTSJSONObject({count:1,success(e){var t;t=e.tempFiles[0].path,z(t).then((e=>{q.showToast({message:l("头像上传成功")}),Y.update({avatarUrl:e})})).catch(((e=null)=>{q.showToast({message:e.message})}))}}))}return(e=null,t=null)=>{const a=p(s("cl-avatar"),j),O=p(s("cl-icon"),w),S=m,T=p(s("cl-text"),_),h=p(s("cl-list-item"),U),k=p(s("cl-list"),g),x=p(s("cl-select"),v),C=p(s("cl-select-date"),J),z=p(s("cl-cascader"),y),q=p(s("cl-page"),N);return o(),n(q,null,new UTSJSONObject({default:r((()=>[i(S,new UTSJSONObject({class:"p-3"}),{default:r((()=>[i(S,new UTSJSONObject({class:"flex flex-col justify-center items-center py-10 mb-3"}),{default:r((()=>[i(S,new UTSJSONObject({class:"relative overflow-visible"}),{default:r((()=>[i(a,new UTSJSONObject({src:c(Y).info.avatarUrl,size:150,pt:new UTSJSONObject({className:"-important-rounded-3xl",icon:new UTSJSONObject({size:60})}),onClick:L}),null,8,["src"]),i(S,new UTSJSONObject({class:"flex flex-col justify-center items-center absolute bottom-0 right--bracket-start--6rpx-bracket-end- bg-black rounded-full p-1 border border-solid border-white"}),{default:r((()=>[i(O,new UTSJSONObject({name:"edit-line",color:"white",size:24}))])),_:1})])),_:1})])),_:1}),i(k,new UTSJSONObject({pt:new UTSJSONObject({className:"mb-3"})}),{default:r((()=>[i(h,new UTSJSONObject({label:c(l)("我的昵称"),hoverable:"",arrow:"",justify:"start",onClick:t[0]||(t[0]=(e=null)=>c(u).to("/pages/user/edit-name"))}),{default:r((()=>[i(T,null,{default:r((()=>[f(b(c(Y).info.nickName),1)])),_:1})])),_:1},8,["label"]),i(h,new UTSJSONObject({label:"手机号",hoverable:"",justify:"start"}),{default:r((()=>[i(T,null,{default:r((()=>[f(b(c(Y).info.phone),1)])),_:1})])),_:1})])),_:1}),i(k,new UTSJSONObject({pt:new UTSJSONObject({className:"mb-3"})}),{default:r((()=>[i(h,new UTSJSONObject({label:c(l)("简介"),hoverable:"",arrow:"",justify:"start",onClick:t[1]||(t[1]=(e=null)=>c(u).to("/pages/user/edit-description"))}),{default:r((()=>[null==c(Y).info.description?(o(),n(T,new UTSJSONObject({key:0,color:"info"}),new UTSJSONObject({default:r((()=>[f(b(c(l)("介绍一下自己")),1)])),_:1}))):(o(),n(T,new UTSJSONObject({key:1,ellipsis:""}),new UTSJSONObject({default:r((()=>[f(b(c(Y).info.description),1)])),_:1})))])),_:1},8,["label"])])),_:1}),i(k,new UTSJSONObject({pt:new UTSJSONObject({className:"mb-3"})}),{default:r((()=>[i(h,new UTSJSONObject({label:c(l)("性别"),hoverable:"",arrow:"",justify:"start",onClick:t[2]||(t[2]=(e=null)=>K("gender"))}),{default:r((()=>[i(T,null,{default:r((()=>[f(b(E.value),1)])),_:1}),""==E.value?(o(),n(T,new UTSJSONObject({key:0,color:"info"}),new UTSJSONObject({default:r((()=>[f(b(c(l)("编辑性别")),1)])),_:1}))):d("",!0)])),_:1},8,["label"]),i(h,new UTSJSONObject({label:c(l)("生日"),hoverable:"",arrow:"",justify:"start",onClick:t[3]||(t[3]=(e=null)=>K("birthday"))}),{default:r((()=>[i(T,null,{default:r((()=>[f(b(c(Y).info.birthday),1)])),_:1}),null==c(Y).info.birthday?(o(),n(T,new UTSJSONObject({key:0,color:"info"}),new UTSJSONObject({default:r((()=>[f(b(c(l)("选择生日")),1)])),_:1}))):d("",!0)])),_:1},8,["label"]),i(h,new UTSJSONObject({label:c(l)("地区"),hoverable:"",arrow:"",justify:"start",onClick:t[4]||(t[4]=(e=null)=>K("region"))}),{default:r((()=>[i(T,null,{default:r((()=>[f(b(H.value),1)])),_:1}),""==H.value?(o(),n(T,new UTSJSONObject({key:0,color:"info"}),new UTSJSONObject({default:r((()=>[f(b(c(l)("选择所在的地区")),1)])),_:1}))):d("",!0)])),_:1},8,["label"])])),_:1}),i(x,new UTSJSONObject({title:c(l)("选择性别"),"model-value":c(Y).info.gender,ref:c(D).set("gender"),options:A.value,"show-trigger":!1,onChange:F}),null,8,["title","model-value","options"]),i(C,new UTSJSONObject({title:c(l)("选择生日"),"model-value":c(Y).info.birthday,ref:c(D).set("birthday"),type:"date",end:c(M),"show-trigger":!1,onChange:B}),null,8,["title","model-value","end"]),i(z,new UTSJSONObject({title:c(l)("选择所在的地区"),ref:c(D).set("region"),options:c(G),"show-trigger":!1,onChange:I}),null,8,["title","options"])])),_:1})])),_:1}))}}});export{Y as default};
