import{d as e,a4 as t,c as a,z as l,a5 as n,T as s,o as c,a as i,w as u,n as o,W as r,U as S,E as O,V as d,a6 as m,av as p,_ as j,g as w,h as b,b as f,F as T,H as N,r as _,aw as g,u as U,e as v,f as J,j as y,af as h}from"./index-Dm37bZwG.js";import{_ as k}from"./cl-tag.BmIAm7jq.js";import{c as x,j as C,r as E,_ as $,a as A,b as K}from"./cl-page.uvue_vue_type_script_setup_true_lang.C6nHLljW.js";import{_ as V}from"./cl-row.BQdu6Wil.js";import{_ as M}from"./cl-loadmore.DB5EymfY.js";class R extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{classNames:{type:String,optional:!0}}}}}constructor(e,t=R.get$UTSMetadata$(),a=!1){super(),this.__props__=UTS.UTSType.initProps(e,t,a),this.classNames=this.__props__.classNames,delete this.__props__}}const F=x(e(Object.assign({name:"cl-waterfall"},{__name:"cl-waterfall",props:{pt:{type:Object,default:()=>new UTSJSONObject({})},column:{type:Number,default:2},gutter:{type:Number,default:12},nodeKey:{type:String,default:"id"}},setup(e,_){var g=_.expose;const U=e,v=t().proxy,J=a((()=>S(U.pt))),y=l([]),h=l([]);function k(){return O(this,void 0,void 0,(function*(){return yield d(),new Promise((e=>{m().in(v).selectAll(".cl-waterfall__column-inner").boundingClientRect().exec((t=>{y.value=t[0].map((e=>{var t;return null!==(t=e.height)&&void 0!==t?t:0})),e(1)}))}))}))}function x(){h.value=[];for(let e=0;e<U.column;e++)h.value.push([])}return n((()=>{s(a((()=>U.column)),(()=>{x(),k()}),{immediate:!0})})),g(new UTSJSONObject({append:function(e){return O(this,void 0,void 0,(function*(){yield k(),h.value[0].push(...e.map((e=>new UTSJSONObject(Object.assign(Object.assign({},e),{isVirtual:!0}))))),yield d(),setTimeout((()=>{m().in(v).selectAll(".is-virtual").boundingClientRect().exec((t=>{t[0].forEach(((t,a)=>{var l;const n=Math.min(...y.value),s=y.value.indexOf(n);h.value[s].push(e[a]),y.value[s]+=null!==(l=t.height)&&void 0!==l?l:0,h.value[0]=h.value[0].filter((e=>1!=e.isVirtual))}))}))}),300)}))},remove:function(e){h.value.forEach(((t,a)=>{h.value[a]=t.filter((t=>t[U.nodeKey]!=e))}))},update:function(e,t){h.value.forEach((a=>{a.forEach((a=>{a[U.nodeKey]==e&&p(a,t)}))}))},clear:x})),(e=null,t=null)=>{const a=j;return c(),i(a,new UTSJSONObject({class:o(["cl-waterfall",[new UTSJSONObject({}),J.value.classNames]]),style:r({padding:"0 ".concat(U.gutter/2,"rpx")})}),new UTSJSONObject({default:u((()=>[(c(!0),w(T,null,b(h.value,((t,l)=>(c(),i(a,new UTSJSONObject({class:"cl-waterfall__column",key:l,style:r({margin:"0 ".concat(U.gutter/2,"rpx")})}),new UTSJSONObject({default:u((()=>[f(a,new UTSJSONObject({class:"cl-waterfall__column-inner"}),{default:u((()=>[(c(!0),w(T,null,b(t,((t,n)=>(c(),i(a,new UTSJSONObject({key:"".concat(l,"-").concat(n,"-").concat(t[U.nodeKey]),class:o(["cl-waterfall__item",new UTSJSONObject({"is-virtual":t.isVirtual})])}),new UTSJSONObject({default:u((()=>[N(e.$slots,"item",new UTSJSONObject({item:t,index:n}),void 0,!0)])),_:2}),1032,["class"])))),128))])),_:2},1024)])),_:2}),1032,["style"])))),128))])),_:3}),8,["class","style"])}}})),[["__scopeId","data-v-8736b29e"]]),P=e({__name:"waterfall",setup(e){const t=l(null),a=l(!1);let s=0;function r(){const e=[new UTSJSONObject({id:s++,likeCount:g(100,1e3),title:"春日樱花盛开时节，粉色花瓣如诗如画般飘洒",image:"/static/demo/1.jpg"}),new UTSJSONObject({id:s++,likeCount:g(100,1e3),title:"夕阳西下的海滩边，金色阳光温柔地洒在波光粼粼的海面上，构成令人心旷神怡的日落美景",image:"/static/demo/2.jpg"}),new UTSJSONObject({id:s++,likeCount:g(100,1e3),title:"寒冬腊月时分，洁白雪花纷纷扬扬地覆盖着整个世界，感受冬日的宁静与美好",image:"/static/demo/3.jpg"}),new UTSJSONObject({id:s++,image:"/static/demo/4.jpg",isAd:!0}),new UTSJSONObject({id:s++,likeCount:g(100,1e3),title:"都市夜景霓虹闪烁，五彩斑斓光芒照亮城市营造梦幻般景象",image:"/static/demo/5.jpg"}),new UTSJSONObject({id:s++,likeCount:g(100,1e3),title:"云雾缭绕的山间风光如诗如画让人心旷神怡，微风轻抚树梢带来阵阵清香，鸟儿在林间自由歌唱",image:"/static/demo/6.jpg"}),new UTSJSONObject({id:s++,likeCount:g(100,1e3),title:"古老建筑与现代摩天大楼交相辉映，传统与现代完美融合创造独特城市景观",image:"/static/demo/7.jpg"}),new UTSJSONObject({id:s++,likeCount:g(100,1e3),title:"广袤田野绿意盎然风光无限，金黄麦浪在微风中轻柔摇曳，农家炊烟袅袅升起",image:"/static/demo/8.jpg"}),new UTSJSONObject({id:s++,likeCount:g(100,1e3),title:"璀璨星空下银河横跨天际，繁星闪烁神秘光芒营造浪漫夜空美景",image:"/static/demo/9.jpg"}),new UTSJSONObject({id:s++,likeCount:g(100,1e3),title:"雄伟瀑布从高耸悬崖飞流直下激起千层浪花，彩虹在水雾中若隐若现如梦如幻",image:"/static/demo/10.jpg"})];t.value.append(e)}return C((()=>{if(a.value)return null;a.value=!0,setTimeout((()=>{r(),a.value=!1}),1e3)})),n((()=>{r()})),(e=null,a=null)=>{const l=h,n=E(_("cl-tag"),k),s=E(_("cl-icon"),$),r=E(_("cl-text"),A),S=E(_("cl-row"),V),O=j,d=E(_("cl-waterfall"),F),m=E(_("cl-loadmore"),M),p=E(_("cl-page"),K);return c(),i(p,new UTSJSONObject({"back-top":""}),new UTSJSONObject({default:u((()=>[f(O,new UTSJSONObject({class:"py-2"}),{default:u((()=>[f(d,new UTSJSONObject({ref_key:"waterfallRef",ref:t,column:2,gutter:16}),{item:u((e=>{var a=e.item;e.index;return[f(O,new UTSJSONObject({class:o(["bg-white mb-3 rounded-xl relative",new UTSJSONObject({"dark-colon--important-bg-gray-800":U(v)})])}),{default:u((()=>[f(l,new UTSJSONObject({src:a.image,mode:"widthFix",class:"w-full rounded-xl"}),null,8,["src"]),a.isAd?(c(),w(T,new UTSJSONObject({key:0}),[f(n,new UTSJSONObject({pt:new UTSJSONObject({className:"absolute left-1 top-1 scale-75"})}),{default:u((()=>[J("广告")])),_:1}),f(s,new UTSJSONObject({color:"white",name:"close-line",pt:new UTSJSONObject({className:"absolute right-2 top-2"}),onClick:(e=null)=>{return l=a.id,void t.value.remove(l);var l}}),null,8,["onClick"])],64)):(c(),i(O,new UTSJSONObject({key:1,class:"p-3"}),new UTSJSONObject({default:u((()=>[f(r,null,{default:u((()=>[J(y(a.title),1)])),_:2},1024),f(S,new UTSJSONObject({class:"mt-2",pt:new UTSJSONObject({className:"justify-end items-center"})}),{default:u((()=>[f(s,new UTSJSONObject({name:"heart-line"})),f(r,new UTSJSONObject({pt:new UTSJSONObject({className:"-important-text-sm ml-1"})}),{default:u((()=>[J(y(a.likeCount),1)])),_:2},1024)])),_:2},1024)])),_:2}),1024))])),_:2},1032,["class"])]})),_:1},512),f(m,new UTSJSONObject({loading:!0}))])),_:1})])),_:1}))}}});export{P as default};
