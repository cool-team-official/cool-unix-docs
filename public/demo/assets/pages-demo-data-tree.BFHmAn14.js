import{j as e,r as l,a as n,_ as t,c,o as a,d as i,b as d,u}from"./cl-page.uvue_vue_type_script_setup_true_lang.Dujw6vu5.js";import{d as o,h as s,r,a as S,o as O,c as b,w as h,i as f,Y as m,_ as p,e as v,x as j,u as N,A as T,f as w,g as U,S as k,p as J,n as _,l as y,m as g,F as C,X as x,a7 as V,aw as E,aM as I,t as H}from"./index-CNagV5B9.js";import{_ as M}from"./cl-switch.CYfHNfMX.js";import{_ as P}from"./cl-list-item.D9Fwhzfd.js";import{_ as z}from"./cl-list.DqrUvrrm.js";import{D as K}from"./item.BgF8i6G3.js";import{b as A}from"./component.C_1pcFTG.js";import"./form.psaMSS8r.js";import"./index.U6ITPUe7.js";import"./cl-collapse.S3OdLei1.js";import"./item.uvue_vue_type_style_index_0_scoped_b08ace3b_lang.LX4ndQdB.js";UTS.UTSType;const B=c(o(Object.assign({name:"cl-tree-item"},{__name:"cl-tree-item",props:{pt:{type:Object,default:()=>new UTSJSONObject({})},item:{type:Object,default:()=>new UTSJSONObject({})},level:{type:Number,default:0}},setup(c){const a=c,i=s((()=>m(a.pt))),d=e("cl-tree"),u=s((()=>null!=a.item.children&&a.item.children.length>0)),o=s((()=>null!=d&&(1==d.checkable&&1==d.multiple))),x=s((()=>null==d?"":1==a.item.isExpand?d.expandIcon:d.icon));function V(){var e;if(1==a.item.disabled)return null;d.setChecked(a.item.id,!(null!==(e=a.item.isChecked)&&void 0!==e&&e))}const E=r(!1);function I(){var e;E.value=!0,d.setExpanded(a.item.id,!(null!==(e=a.item.isExpand)&&void 0!==e&&e)),null!=d&&1==d.checkable&&1!=d.multiple&&1!=a.item.disabled&&V()}function H(){E.value=!1}return(e=null,s=null)=>{var r;const m=l(S("cl-icon"),n),M=p,P=l(S("cl-text"),t),z=l(S("cl-tree-item"),B);return O(),b(M,{class:f(["cl-tree-item-wrapper",[new UTSJSONObject({}),null===(r=i.value.itemWrapper)||void 0===r?null:r.className]])},{default:h((()=>{var e,l,n,t,s;return[v(M,{class:f(["cl-tree-item",[new UTSJSONObject({}),{"is-expand":E.value,"is-dark":N(J),"is-checked":1==c.item.isChecked&&1==(null===(e=N(d))||void 0===e?null:e.checkable)&&0==(null===(l=N(d))||void 0===l?null:l.multiple),"is-half-checked":c.item.isHalfChecked,"is-disabled":c.item.disabled,"is-multiple":null===(n=N(d))||void 0===n?null:n.multiple},null===(t=i.value.item)||void 0===t?null:t.className,1==c.item.isChecked?null===(s=i.value.itemChecked)||void 0===s?null:s.className:""]]),style:_({paddingLeft:"".concat(50*c.level+16,"rpx")}),onTouchstart:I,onTouchend:H,onTouchcancel:H},{default:h((()=>{var e,l,n;return[v(M,{class:f(["cl-tree-item__expand",[new UTSJSONObject({}),null===(e=i.value.expand)||void 0===e?null:e.className]])},{default:h((()=>{var e,l,n,t;return[u.value?(O(),b(m,{key:0,name:x.value,size:null!==(l=null===(e=i.value.expandIcon)||void 0===e?null:e.size)&&void 0!==l?l:34,color:null===(n=i.value.expandIcon)||void 0===n?null:n.color,pt:{className:null===(t=i.value.expandIcon)||void 0===t?null:t.className}},null,8,["name","size","color","pt"])):j("",!0)]})),_:1},8,["class"]),v(P,{pt:{className:N(T)(["flex-1 mx-1",null===(l=i.value.label)||void 0===l?null:l.className])}},{default:h((()=>[w(U(c.item.label),1)])),_:1},8,["pt"]),o.value?(O(),b(M,{key:0,class:f(["cl-tree-item__checkbox",[new UTSJSONObject({}),null===(n=i.value.checkbox)||void 0===n?null:n.className]]),onTouchstart:k(V,["stop"])},{default:h((()=>{var e,l,n,t,a,d,u,o,s,r,S,h,f,p,v,j,N,T;return[c.item.isChecked?(O(),b(m,{key:0,name:null!==(l=null===(e=i.value.checkedIcon)||void 0===e?null:e.name)&&void 0!==l?l:"checkbox-circle-fill",size:null!==(t=null===(n=i.value.checkedIcon)||void 0===n?null:n.size)&&void 0!==t?t:38,color:null!==(d=null===(a=i.value.checkedIcon)||void 0===a?null:a.color)&&void 0!==d?d:"primary"},null,8,["name","size","color"])):c.item.isHalfChecked?(O(),b(m,{key:1,name:null!==(o=null===(u=i.value.halfCheckedIcon)||void 0===u?null:u.name)&&void 0!==o?o:"indeterminate-circle-line",size:null!==(r=null===(s=i.value.halfCheckedIcon)||void 0===s?null:s.size)&&void 0!==r?r:38,color:null!==(h=null===(S=i.value.halfCheckedIcon)||void 0===S?null:S.color)&&void 0!==h?h:"primary"},null,8,["name","size","color"])):(O(),b(m,{key:2,name:null!==(p=null===(f=i.value.uncheckedIcon)||void 0===f?null:f.name)&&void 0!==p?p:"checkbox-blank-circle-line",size:null!==(j=null===(v=i.value.uncheckedIcon)||void 0===v?null:v.size)&&void 0!==j?j:38,color:null!==(T=null===(N=i.value.uncheckedIcon)||void 0===N?null:N.color)&&void 0!==T?T:"info"},null,8,["name","size","color"]))]})),_:1},8,["class"])):j("",!0)]})),_:1},8,["class","style"]),u.value&&1==c.item.isExpand?(O(!0),y(C,new UTSJSONObject({key:0}),g(c.item.children,(e=>(O(),b(z,new UTSJSONObject({key:e.id,item:e,level:c.level+1,pt:a.pt}),null,8,["item","level","pt"])))),128)):j("",!0)]})),_:1},8,["class"])}}})),[["__scopeId","data-v-cac4b90c"]]);class X extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{className:{type:String,optional:!0}}}}}constructor(e,l=X.get$UTSMetadata$(),n=!1){super(),this.__props__=UTS.UTSType.initProps(e,l,n),this.className=this.__props__.className,delete this.__props__}}const D=o(Object.assign({name:"cl-tree"},{__name:"cl-tree",props:{pt:{type:Object,default:()=>new UTSJSONObject({})},modelValue:{type:[Array,String,Number],default:null},list:{type:Array,default:()=>[]},icon:{type:String,default:"arrow-right-s-fill"},expandIcon:{type:String,default:"arrow-down-s-fill"},checkStrictly:{type:Boolean,default:!1},checkable:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(e,n){var t=n.expose,c=n.emit;const a=e,i=c,d=s((()=>m(a.pt))),u=r(a.list),o=s((()=>{const e=new Map;return function l(n,t=null){for(let c=0;c<n.length;c++){const a=n[c];e.set(a.id,{node:a,parent:t,index:c}),null!=a.children&&a.children.length>0&&l(a.children,a)}}(u.value),e}));function v(e){const l=UTS.mapGet(o.value,e);return null!=l?l:null}function j(){!function e(l){for(let n=0;n<l.length;n++){const t=l[n],c=null!=t.children?t.children:[];if(0==c.length){t.isHalfChecked=!1;continue}e(c);let a=0,i=0;for(let e=0;e<c.length;e++)1==c[e].isChecked?a++:1==c[e].isHalfChecked&&i++;a==c.length?(t.isChecked=!0,t.isHalfChecked=!1):a>0||i>0?(t.isChecked=!1,t.isHalfChecked=!0):(t.isChecked=!1,t.isHalfChecked=!1)}}(u.value)}function N(e){const l=function(e){const l=[];let n=v(e);for(;null!=n&&null!=n.parent;)l.unshift(n.parent),n=v(n.parent.id);return l}(e);for(let n=l.length-1;n>=0;n--){const e=l[n],t=null!=e.children?e.children:[];if(0==t.length)continue;let c=0,a=0;for(let l=0;l<t.length;l++)1==t[l].isChecked?c++:1==t[l].isHalfChecked&&a++;c==t.length?(e.isChecked=!0,e.isHalfChecked=!1):c>0||a>0?(e.isChecked=!1,e.isHalfChecked=!0):(e.isChecked=!1,e.isHalfChecked=!1)}}function T(e){const l=v(e);if(null==l||null==l.node.children)return[];const n=[],t=[];for(let c=0;c<l.node.children.length;c++)t.push(l.node.children[c]);for(;t.length>0;){const e=UTS.arrayShift(t);if(null==e)break;if(n.push(e),null!=e.children&&e.children.length>0)for(let l=0;l<e.children.length;l++)t.push(e.children[l])}return n}function w(){o.value.forEach((e=>{e.node.isChecked=!1,e.node.isHalfChecked=!1}))}function U(e,l){const n=v(e);if(null==n)return null;if(a.multiple||w(),n.node.isChecked=l,a.multiple&&!a.checkStrictly){const n=T(e);for(let e=0;e<n.length;e++)n[e].isChecked=l;N(e)}}function k(e){for(let l=0;l<e.length;l++){const n=e[l],t=v(n);if(null!=t&&(t.node.isChecked=!0,!a.checkStrictly)){const e=T(n);for(let l=0;l<e.length;l++)e[l].isChecked=!0}}a.checkStrictly||j()}function J(){const e=[];return function l(n){for(let t=0;t<n.length;t++){const c=n[t];1==c.isChecked&&e.push(c.id),null!=c.children&&l(c.children)}}(u.value),e}function _(){if(V(u.value))return null;const e=J();if(null==a.modelValue||!E(e,a.modelValue)){const l=a.multiple?e:I(e);i("update:modelValue",l),i("change",l)}}function H(){if(null==a.modelValue)return null;const e=J();E(e,a.modelValue)||(Array.isArray(a.modelValue)?k(a.modelValue):U(a.modelValue,!0)),_()}return x(s((()=>a.list)),(e=>{u.value=e,H()}),{immediate:!0}),x(s((()=>{var e;return[null!==(e=a.modelValue)&&void 0!==e?e:0]})),(()=>{H()}),{immediate:!0,deep:!0}),x(u,(()=>{!a.checkStrictly&&a.multiple&&j(),_()}),{deep:!0}),t(new UTSJSONObject({icon:s((()=>a.icon)),expandIcon:s((()=>a.expandIcon)),checkStrictly:s((()=>a.checkStrictly)),checkable:s((()=>a.checkable)),multiple:s((()=>a.multiple)),clearChecked:w,setChecked:U,setCheckedKeys:k,getCheckedKeys:J,getHalfCheckedKeys:function(){const e=[];return function l(n){for(let t=0;t<n.length;t++){const c=n[t];1==c.isHalfChecked&&e.push(c.id),null!=c.children&&l(c.children)}}(u.value),e},setExpanded:function(e,l){const n=v(e);if(null==n)return null;n.node.isExpand=l},setExpandedKeys:function(e){for(let l=0;l<e.length;l++){const n=v(e[l]);null!=n&&(n.node.isExpand=!0)}},getExpandedKeys:function(){const e=[];return function l(n){for(let t=0;t<n.length;t++){const c=n[t];1==c.isExpand&&e.push(c.id),null!=c.children&&l(c.children)}}(u.value),e},expandAll:function(){o.value.forEach((e=>{null!=e.node.children&&e.node.children.length>0&&(e.node.isExpand=!0)}))},collapseAll:function(){o.value.forEach((e=>{e.node.isExpand=!1}))}})),(e=null,n=null)=>{const t=l(S("cl-tree-item"),B),c=p;return O(),b(c,new UTSJSONObject({class:f(["cl-tree",[new UTSJSONObject({}),d.value.className]])}),new UTSJSONObject({default:h((()=>[(O(!0),y(C,null,g(u.value,(e=>(O(),b(t,new UTSJSONObject({key:e.id,item:e,level:0,pt:a.pt}),null,8,["item","pt"])))),128))])),_:1}),8,["class"])}}})),L=o({__name:"tree",setup(e){const n=u(),c=r([]);const o=r(!1),s=r(!1),f=r(null),m=r(["1-1-1-1","2-1-1","2-1-2"]);r("1-1-1");const T=r([]),k=r([]);function J(){f.value.setCheckedKeys(["1-1","2"])}function _(){m.value=f.value.getCheckedKeys()}function y(){f.value.clearChecked(),m.value=[],T.value=[]}function g(){T.value=f.value.getHalfCheckedKeys()}function C(){f.value.setExpandedKeys(["4","5"])}function x(){k.value=f.value.getExpandedKeys()}function V(){f.value.expandAll(),k.value=f.value.getExpandedKeys()}function E(){f.value.collapseAll(),k.value=[]}return a((()=>{n.showLoading(),setTimeout((()=>{c.value=A([new UTSJSONObject({id:"1",label:"华为",children:[new UTSJSONObject({id:"1-1",label:"手机",children:[new UTSJSONObject({id:"1-1-1",label:"Mate系列",children:[new UTSJSONObject({id:"1-1-1-1",label:"Mate 50"}),new UTSJSONObject({id:"1-1-1-2",disabled:!0,label:"Mate 40"}),new UTSJSONObject({id:"1-1-1-3",label:"Mate 30"})]}),new UTSJSONObject({id:"1-1-2",label:"P系列",children:[new UTSJSONObject({id:"1-1-2-1",disabled:!0,label:"P60"}),new UTSJSONObject({id:"1-1-2-2",label:"P50"}),new UTSJSONObject({id:"1-1-2-3",label:"P40"})]})]}),new UTSJSONObject({id:"1-2",label:"笔记本",children:[new UTSJSONObject({id:"1-2-1",label:"MateBook X",children:[new UTSJSONObject({id:"1-2-1-1",label:"MateBook X Pro"}),new UTSJSONObject({id:"1-2-1-2",label:"MateBook X 2022"})]}),new UTSJSONObject({id:"1-2-2",label:"MateBook D",children:[new UTSJSONObject({id:"1-2-2-1",label:"MateBook D 14"}),new UTSJSONObject({id:"1-2-2-2",label:"MateBook D 15"})]}),new UTSJSONObject({id:"1-2-3",label:"MateBook 13"})]})]}),new UTSJSONObject({id:"2",label:"小米",isExpand:!0,children:[new UTSJSONObject({id:"2-1",label:"手机",children:[new UTSJSONObject({id:"2-1-1",label:"小米数字系列"}),new UTSJSONObject({id:"2-1-2",label:"Redmi系列"})]}),new UTSJSONObject({id:"2-2",label:"家电",children:[new UTSJSONObject({id:"2-2-1",label:"电视"}),new UTSJSONObject({id:"2-2-2",label:"空调"})]})]}),new UTSJSONObject({id:"3",label:"苹果",children:[new UTSJSONObject({id:"3-1",label:"手机",children:[new UTSJSONObject({id:"3-1-1",label:"iPhone 14"}),new UTSJSONObject({id:"3-1-2",label:"iPhone 13"})]}),new UTSJSONObject({id:"3-2",label:"平板",children:[new UTSJSONObject({id:"3-2-1",label:"iPad Pro"}),new UTSJSONObject({id:"3-2-2",label:"iPad Air"})]})]}),new UTSJSONObject({id:"4",label:"OPPO",children:[new UTSJSONObject({id:"4-1",label:"手机",children:[new UTSJSONObject({id:"4-1-1",label:"Find系列"}),new UTSJSONObject({id:"4-1-2",label:"Reno系列"})]}),new UTSJSONObject({id:"4-2",label:"配件",children:[new UTSJSONObject({id:"4-2-1",label:"耳机"}),new UTSJSONObject({id:"4-2-2",label:"手环"})]})]}),new UTSJSONObject({id:"5",label:"vivo",children:[new UTSJSONObject({id:"5-1",label:"手机",children:[new UTSJSONObject({id:"5-1-1",label:"X系列"}),new UTSJSONObject({id:"5-1-2",label:"S系列"})]}),new UTSJSONObject({id:"5-2",label:"智能设备",children:[new UTSJSONObject({id:"5-2-1",label:"手表"}),new UTSJSONObject({id:"5-2-2",label:"耳机"})]})]})]),n.hideLoading()}),500)})),(e=null,n=null)=>{const a=l(S("cl-tree"),D),u=l(S("cl-switch"),M),r=l(S("cl-list-item"),P),I=l(S("cl-list"),z),A=l(S("cl-text"),t),B=l(S("cl-button"),i),X=p,L=l(S("cl-page"),d);return O(),b(L,null,new UTSJSONObject({default:h((()=>[v(X,new UTSJSONObject({class:"p-3"}),{default:h((()=>[v(N(K),new UTSJSONObject({label:N(H)("树形结构")}),{default:h((()=>[v(a,new UTSJSONObject({modelValue:m.value,"onUpdate:modelValue":n[0]||(n[0]=(e=null)=>m.value=e),ref_key:"treeRef",ref:f,list:c.value,icon:s.value?"add-circle-line":"arrow-right-s-fill","expand-icon":s.value?"indeterminate-circle-line":"arrow-down-s-fill",checkable:!0,multiple:!0,"check-strictly":o.value}),null,8,["modelValue","list","icon","expand-icon","check-strictly"]),v(I,new UTSJSONObject({border:"",pt:new UTSJSONObject({className:"mt-5"})}),{default:h((()=>[v(r,new UTSJSONObject({label:N(H)("父子关联")}),{default:h((()=>[v(u,new UTSJSONObject({modelValue:o.value,"onUpdate:modelValue":n[1]||(n[1]=(e=null)=>o.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),v(r,new UTSJSONObject({label:N(H)("换个图标")}),{default:h((()=>[v(u,new UTSJSONObject({modelValue:s.value,"onUpdate:modelValue":n[2]||(n[2]=(e=null)=>s.value=e)}),null,8,["modelValue"])])),_:1},8,["label"])])),_:1})])),_:1},8,["label"]),v(N(K),new UTSJSONObject({label:N(H)("选中值")}),{default:h((()=>[v(A,null,{default:h((()=>[w(U(m.value.join("、")),1)])),_:1})])),_:1},8,["label"]),v(N(K),new UTSJSONObject({label:N(H)("选中操作")}),{default:h((()=>[v(X,new UTSJSONObject({class:"mb-2"}),{default:h((()=>[v(B,new UTSJSONObject({onClick:J}),{default:h((()=>[w(U(N(H)("选中部分节点")),1)])),_:1})])),_:1}),v(X,new UTSJSONObject({class:"mb-2"}),{default:h((()=>[v(B,new UTSJSONObject({onClick:_}),{default:h((()=>[w(U(N(H)("获取选中节点")),1)])),_:1})])),_:1}),v(X,new UTSJSONObject({class:"mb-2"}),{default:h((()=>[v(B,new UTSJSONObject({onClick:g}),{default:h((()=>[w(U(N(H)("获取半选节点")),1)])),_:1}),T.value.length>0?(O(),b(A,new UTSJSONObject({key:0,pt:new UTSJSONObject({className:"!text-sm p-2"})}),new UTSJSONObject({default:h((()=>[w(U(T.value.join("、")),1)])),_:1}))):j("",!0)])),_:1}),v(X,new UTSJSONObject({class:"mb-2"}),{default:h((()=>[v(B,new UTSJSONObject({onClick:y}),{default:h((()=>[w(U(N(H)("清空选中")),1)])),_:1})])),_:1})])),_:1},8,["label"]),v(N(K),new UTSJSONObject({label:N(H)("展开操作")}),{default:h((()=>[v(X,new UTSJSONObject({class:"mb-2"}),{default:h((()=>[v(B,new UTSJSONObject({onClick:C}),{default:h((()=>[w(U(N(H)("展开部分节点")),1)])),_:1})])),_:1}),v(X,new UTSJSONObject({class:"mb-2"}),{default:h((()=>[v(B,new UTSJSONObject({onClick:x}),{default:h((()=>[w(U(N(H)("获取展开节点")),1)])),_:1}),k.value.length>0?(O(),b(A,new UTSJSONObject({key:0,pt:new UTSJSONObject({className:"!text-sm p-2"})}),new UTSJSONObject({default:h((()=>[w(U(k.value.join("、")),1)])),_:1}))):j("",!0)])),_:1}),v(X,new UTSJSONObject({class:"mb-2"}),{default:h((()=>[v(B,new UTSJSONObject({onClick:V}),{default:h((()=>[w(U(N(H)("展开所有")),1)])),_:1})])),_:1}),v(X,new UTSJSONObject({class:"mb-2"}),{default:h((()=>[v(B,new UTSJSONObject({onClick:E}),{default:h((()=>[w(U(N(H)("收起所有")),1)])),_:1})])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}))}}});export{L as default};
