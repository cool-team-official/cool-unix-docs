import{d as e,a3 as t,h as a,r as l,a4 as s,X as n,o as c,c as i,w as o,i as u,n as r,Y as m,H as S,a0 as O,a5 as d,K as p,_ as j,l as g,m as w,e as b,F as f,N as _,a as N,aL as T,u as U,p as v,f as J,g as h,au as y}from"./index-CNagV5B9.js";import{_ as x}from"./cl-tag.2VZc8Gp8.js";import{c as k,q as C,r as K,a as $,_ as A,b as E}from"./cl-page.uvue_vue_type_script_setup_true_lang.Dujw6vu5.js";import{_ as M}from"./cl-row.D_mHJsH7.js";import{_ as R}from"./cl-loadmore.R7gBF0Rb.js";import"./cl-safe-area.uvue_vue_type_script_setup_true_lang.D2kDdfQ_.js";class V extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{className:{type:String,optional:!0}}}}}constructor(e,t=V.get$UTSMetadata$(),a=!1){super(),this.__props__=UTS.UTSType.initProps(e,t,a),this.className=this.__props__.className,delete this.__props__}}const F=k(e(Object.assign({name:"cl-waterfall"},{__name:"cl-waterfall",props:{pt:{type:Object,default:()=>new UTSJSONObject({})},column:{type:Number,default:2},gutter:{type:Number,default:12},nodeKey:{type:String,default:"id"}},setup(e,N){var T=N.expose;const U=e,v=t().proxy,J=a((()=>m(U.pt))),h=l([]),y=l([]);function x(){return S(this,void 0,void 0,(function*(){return yield O(),new Promise((e=>{d().in(v).selectAll(".cl-waterfall__column-inner").boundingClientRect().exec((t=>{h.value=t[0].map((e=>{var t;return null!==(t=e.height)&&void 0!==t?t:0})),e(1)}))}))}))}function k(){y.value=[];for(let e=0;e<U.column;e++)y.value.push([])}return s((()=>{n(a((()=>U.column)),(()=>{k(),x()}),{immediate:!0})})),T(new UTSJSONObject({append:function(e){return S(this,void 0,void 0,(function*(){yield x(),y.value[0].push(...e.map((e=>new UTSJSONObject(Object.assign(Object.assign({},e),{isVirtual:!0}))))),yield O(),setTimeout((()=>{d().in(v).selectAll(".is-virtual").boundingClientRect().exec((t=>{t[0].forEach(((t,a)=>{var l;const s=Math.min(...h.value),n=h.value.indexOf(s);y.value[n].push(e[a]),h.value[n]+=null!==(l=t.height)&&void 0!==l?l:0,y.value[0]=y.value[0].filter((e=>1!=e.isVirtual))}))}))}),300)}))},remove:function(e){y.value.forEach(((t,a)=>{y.value[a]=t.filter((t=>t[U.nodeKey]!=e))}))},update:function(e,t){y.value.forEach((a=>{a.forEach((a=>{a[U.nodeKey]==e&&p(a,t)}))}))},clear:k})),(e=null,t=null)=>{const a=j;return c(),i(a,new UTSJSONObject({class:u(["cl-waterfall",[new UTSJSONObject({}),J.value.className]]),style:r({padding:"0 ".concat(U.gutter/2,"rpx")})}),new UTSJSONObject({default:o((()=>[(c(!0),g(f,null,w(y.value,((t,l)=>(c(),i(a,new UTSJSONObject({class:"cl-waterfall__column",key:l,style:r({margin:"0 ".concat(U.gutter/2,"rpx")})}),new UTSJSONObject({default:o((()=>[b(a,new UTSJSONObject({class:"cl-waterfall__column-inner"}),{default:o((()=>[(c(!0),g(f,null,w(t,((t,s)=>(c(),i(a,new UTSJSONObject({key:"".concat(l,"-").concat(s,"-").concat(t[U.nodeKey]),class:u(["cl-waterfall__item",new UTSJSONObject({"is-virtual":t.isVirtual})])}),new UTSJSONObject({default:o((()=>[_(e.$slots,"item",new UTSJSONObject({item:t,index:s}),void 0,!0)])),_:2}),1032,["class"])))),128))])),_:2},1024)])),_:2}),1032,["style"])))),128))])),_:3}),8,["class","style"])}}})),[["__scopeId","data-v-8a673606"]]),P=e({__name:"waterfall",setup(e){const t=l(null),a=l(!1);let n=0;function r(){const e=[new UTSJSONObject({id:n++,likeCount:T(100,1e3),title:"春日樱花盛开时节，粉色花瓣如诗如画般飘洒",image:"https://unix.cool-js.com/images/demo/1.jpg"}),new UTSJSONObject({id:n++,likeCount:T(100,1e3),title:"夕阳西下的海滩边，金色阳光温柔地洒在波光粼粼的海面上，构成令人心旷神怡的日落美景",image:"https://unix.cool-js.com/images/demo/2.jpg"}),new UTSJSONObject({id:n++,likeCount:T(100,1e3),title:"寒冬腊月时分，洁白雪花纷纷扬扬地覆盖着整个世界，感受冬日的宁静与美好",image:"https://unix.cool-js.com/images/demo/3.jpg"}),new UTSJSONObject({id:n++,image:"https://unix.cool-js.com/images/demo/4.jpg",isAd:!0}),new UTSJSONObject({id:n++,likeCount:T(100,1e3),title:"都市夜景霓虹闪烁，五彩斑斓光芒照亮城市营造梦幻般景象",image:"https://unix.cool-js.com/images/demo/5.jpg"}),new UTSJSONObject({id:n++,likeCount:T(100,1e3),title:"云雾缭绕的山间风光如诗如画让人心旷神怡，微风轻抚树梢带来阵阵清香，鸟儿在林间自由歌唱",image:"https://unix.cool-js.com/images/demo/6.jpg"}),new UTSJSONObject({id:n++,likeCount:T(100,1e3),title:"古老建筑与现代摩天大楼交相辉映，传统与现代完美融合创造独特城市景观",image:"https://unix.cool-js.com/images/demo/7.jpg"}),new UTSJSONObject({id:n++,likeCount:T(100,1e3),title:"广袤田野绿意盎然风光无限，金黄麦浪在微风中轻柔摇曳，农家炊烟袅袅升起",image:"https://unix.cool-js.com/images/demo/8.jpg"}),new UTSJSONObject({id:n++,likeCount:T(100,1e3),title:"璀璨星空下银河横跨天际，繁星闪烁神秘光芒营造浪漫夜空美景",image:"https://unix.cool-js.com/images/demo/9.jpg"}),new UTSJSONObject({id:n++,likeCount:T(100,1e3),title:"雄伟瀑布从高耸悬崖飞流直下激起千层浪花，彩虹在水雾中若隐若现如梦如幻",image:"https://unix.cool-js.com/images/demo/10.jpg"})];t.value.append(e)}return C((()=>{if(a.value)return null;a.value=!0,setTimeout((()=>{r(),a.value=!1}),1e3)})),s((()=>{r()})),(e=null,a=null)=>{const l=y,s=K(N("cl-tag"),x),n=K(N("cl-icon"),$),r=K(N("cl-text"),A),m=K(N("cl-row"),M),S=j,O=K(N("cl-waterfall"),F),d=K(N("cl-loadmore"),R),p=K(N("cl-page"),E);return c(),i(p,new UTSJSONObject({"back-top":""}),new UTSJSONObject({default:o((()=>[b(S,new UTSJSONObject({class:"py-2"}),{default:o((()=>[b(O,new UTSJSONObject({ref_key:"waterfallRef",ref:t,column:2,gutter:16}),{item:o((e=>{var a=e.item;e.index;return[b(S,new UTSJSONObject({class:u(["bg-white mb-3 rounded-xl relative",new UTSJSONObject({"dark-colon--important-bg-gray-800":U(v)})])}),{default:o((()=>[b(l,new UTSJSONObject({src:a.image,mode:"widthFix",class:"w-full rounded-xl"}),null,8,["src"]),a.isAd?(c(),g(f,new UTSJSONObject({key:0}),[b(s,new UTSJSONObject({pt:new UTSJSONObject({className:"absolute left-1 top-1 scale-75"})}),{default:o((()=>[J("广告")])),_:1}),b(n,new UTSJSONObject({color:"white",name:"close-line",pt:new UTSJSONObject({className:"absolute right-2 top-2"}),onClick:(e=null)=>{return l=a.id,void t.value.remove(l);var l}}),null,8,["onClick"])],64)):(c(),i(S,new UTSJSONObject({key:1,class:"p-3"}),new UTSJSONObject({default:o((()=>[b(r,null,{default:o((()=>[J(h(a.title),1)])),_:2},1024),b(m,new UTSJSONObject({class:"mt-2",pt:new UTSJSONObject({className:"justify-end items-center"})}),{default:o((()=>[b(n,new UTSJSONObject({name:"heart-line"})),b(r,new UTSJSONObject({pt:new UTSJSONObject({className:"-important-text-sm ml-1"})}),{default:o((()=>[J(h(a.likeCount),1)])),_:2},1024)])),_:2},1024)])),_:2}),1024))])),_:2},1032,["class"])]})),_:1},512),b(d,new UTSJSONObject({loading:!0,"safe-area-bottom":""}))])),_:1})])),_:1}))}}});export{P as default};
