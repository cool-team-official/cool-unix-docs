import{_ as e}from"./cl-select-trigger.DBZO2fel.js";import{d as l,t,z as a,c as n,T as s,r as u,o,g as p,a as r,p as i,b as c,w as d,F as m,U as _,a7 as S,P as f,a8 as b,O,f as v,j as g,_ as T,G as h,u as U}from"./index-DH23VVp-.js";import{r as w,d as j,e as N,c as y,u as J,b as V}from"./cl-page.uvue_vue_type_script_setup_true_lang.B8PcFQeN.js";import{_ as x}from"./cl-picker-view.D-Alok-7.js";import{_ as k}from"./cl-switch.CGHTfetf.js";import{_ as C,a as $}from"./cl-list.BExPKBdU.js";import{D as B}from"./item.JCpgpelj.js";import"./index.U6ITPUe7.js";import"./cl-collapse.pZpIkgZm.js";import"./item.uvue_vue_type_style_index_0_scoped_f51a3be8_lang.Dl9fq3Ln.js";class H extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{trigger:{type:"Unknown",optional:!0},popup:{type:"Unknown",optional:!0}}}}}constructor(e,l=H.get$UTSMetadata$(),t=!1){super(),this.__props__=UTS.UTSType.initProps(e,l,t),this.trigger=this.__props__.trigger,this.popup=this.__props__.popup,delete this.__props__}}const M=y(l(Object.assign({name:"cl-select-time"},{__name:"cl-select-time",props:{pt:{type:Object,default:()=>new UTSJSONObject({})},modelValue:{type:String,default:""},headers:{type:Array,default:()=>[t("小时"),t("分钟"),t("秒数")]},title:{type:String,default:t("请选择")},placeholder:{type:String,default:t("请选择")},showTrigger:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},confirmText:{type:String,default:t("确定")},showConfirm:{type:Boolean,default:!0},cancelText:{type:String,default:t("取消")},showCancel:{type:Boolean,default:!0},labelFormat:{type:String,default:"{H}:{m}:{s}"}},emits:["update:modelValue","change"],setup(l,t){var h=t.expose,U=t.emit;const y=l,J=U,V=a(null),k=n((()=>_(y.pt))),C=a([]),$=a([]),B=n((()=>{const e=[[],[],[]];for(let l=0;l<60;l++){const t=l.toString().padStart(2,"0"),a={label:t,value:t};l<24&&e[0].push(a),e[1].push(a),e[2].push(a)}return e})),H=n((()=>{const e=y.modelValue;if(S(e)||f(e))return"";const l=b(e.split(":"),3),t=l[0],a=l[1],n=l[2];return y.labelFormat.replace("{H}",t).replace("{m}",a).replace("{s}",n)}));function M(e){const l=[...$.value];for(let t=0;t<e.length;t++)l[t]!=e[t]&&(l[t]=e[t]);$.value=l,C.value=l.map(((e,l)=>B.value[l][e].value))}const z=a(!1);let F=null;function P(e=null){if(y.disabled)return null;z.value=!0,F=e}function I(){z.value=!1}function R(){J("update:modelValue",""),J("change","")}function A(){const e=C.value.join(":");J("update:modelValue",e),J("change",e),null!=F&&F(e),I()}return s(n((()=>y.modelValue)),(e=>{let l;l=S(e)||f(e)?[]:e.split(":");let t=[];for(let a=0;a<3;a++)if(a>=l.length)t.push(0),l.push(B.value[a][0].value);else{let e=B.value[a].findIndex((e=>e.value==l[a]));e<0&&(e=0),t.push(e)}C.value=l,$.value=t}),{immediate:!0}),h(new UTSJSONObject({open:P,close:I})),(t=null,a=null)=>{var n,s,_,S,f,b,h,U;const y=w(u("cl-select-trigger"),e),J=w(u("cl-picker-view"),x),C=T,F=w(u("cl-button"),j),D=w(u("cl-popup"),N);return o(),p(m,null,[l.showTrigger?(o(),r(y,{key:0,pt:{className:null===(n=k.value.trigger)||void 0===n?null:n.className,icon:null===(s=k.value.trigger)||void 0===s?null:s.icon},placeholder:l.placeholder,disabled:l.disabled,focus:null===(_=V.value)||void 0===_?null:_.isOpen,text:H.value,"arrow-icon":"time-line",onClick:a[0]||(a[0]=(e=null)=>P()),onClear:R},null,8,["pt","placeholder","disabled","focus","text"])):i("",!0),c(D,{ref_key:"popupRef",ref:V,modelValue:z.value,"onUpdate:modelValue":a[2]||(a[2]=(e=null)=>z.value=e),title:l.title,pt:{className:null===(S=k.value.popup)||void 0===S?null:S.className,header:null===(f=k.value.popup)||void 0===f?null:f.header,container:null===(b=k.value.popup)||void 0===b?null:b.container,mask:null===(h=k.value.popup)||void 0===h?null:h.mask,draw:null===(U=k.value.popup)||void 0===U?null:U.draw}},{default:d((()=>[c(C,new UTSJSONObject({class:"cl-select-popup",onTouchmove:a[1]||(a[1]=O((()=>{}),["stop"]))}),{default:d((()=>[c(C,new UTSJSONObject({class:"cl-select-popup__picker"}),{default:d((()=>[c(J,new UTSJSONObject({value:$.value,headers:l.headers,columns:B.value,"reset-on-change":!1,onChange:M}),null,8,["value","headers","columns"])])),_:1}),c(C,new UTSJSONObject({class:"cl-select-popup__op"}),{default:d((()=>[l.showCancel?(o(),r(F,new UTSJSONObject({key:0,size:"large",text:"",border:"",type:"light",pt:new UTSJSONObject({className:"flex-1 -important-rounded-xl h--bracket-start-80rpx-bracket-end-"}),onClick:I}),new UTSJSONObject({default:d((()=>[v(g(l.cancelText),1)])),_:1}))):i("",!0),l.showConfirm?(o(),r(F,new UTSJSONObject({key:1,size:"large",pt:new UTSJSONObject({className:"flex-1 -important-rounded-xl h--bracket-start-80rpx-bracket-end-"}),onClick:A}),new UTSJSONObject({default:d((()=>[v(g(l.confirmText),1)])),_:1}))):i("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue","title","pt"])],64)}}})),[["__scopeId","data-v-8db270f6"]]);class z extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{time1:{type:String,optional:!1},time2:{type:String,optional:!1},time3:{type:String,optional:!1}}}}}constructor(e,l=z.get$UTSMetadata$(),t=!1){super(),this.__props__=UTS.UTSType.initProps(e,l,t),this.time1=this.__props__.time1,this.time2=this.__props__.time2,this.time3=this.__props__.time3,delete this.__props__}}const F=l({__name:"select-time",setup(e){const l=J(),s=h(new z({time1:"",time2:"",time3:""})),p=a(!1),i=a(!1),m=n((()=>i.value?"{H}时{m}分{s}秒":"{H}:{m}:{s}")),_=a(null);function S(){_.value.open((e=>{l.showToast({message:"你选择了：".concat(e)})}))}return(e=null,l=null)=>{const a=w(u("cl-select-time"),M),n=w(u("cl-button"),j),f=T,b=w(u("cl-switch"),k),O=w(u("cl-list-item"),C),h=w(u("cl-list"),$),N=w(u("cl-page"),V);return o(),r(N,null,new UTSJSONObject({default:d((()=>[c(f,new UTSJSONObject({class:"p-3"}),{default:d((()=>[c(U(B),new UTSJSONObject({label:U(t)("基础用法")}),{default:d((()=>[c(a,new UTSJSONObject({modelValue:s.time1,"onUpdate:modelValue":l[0]||(l[0]=(e=null)=>s.time1=e)}),null,8,["modelValue"])])),_:1},8,["label"]),c(U(B),new UTSJSONObject({label:U(t)("自定义触发器")}),{default:d((()=>[c(f,new UTSJSONObject({class:"flex flex-row"}),{default:d((()=>[c(n,new UTSJSONObject({onClick:S}),{default:d((()=>[v(g(U(t)("打开选择器")),1)])),_:1})])),_:1}),c(a,new UTSJSONObject({ref_key:"selectRef2",ref:_,modelValue:s.time2,"onUpdate:modelValue":l[1]||(l[1]=(e=null)=>s.time2=e),"show-trigger":!1}),null,8,["modelValue"])])),_:1},8,["label"]),c(U(B),new UTSJSONObject({label:U(t)("自定义")}),{default:d((()=>[c(a,new UTSJSONObject({modelValue:s.time3,"onUpdate:modelValue":l[2]||(l[2]=(e=null)=>s.time3=e),disabled:p.value,"label-format":m.value}),null,8,["modelValue","disabled","label-format"]),c(h,new UTSJSONObject({border:"",pt:new UTSJSONObject({className:"mt-3"})}),{default:d((()=>[c(O,new UTSJSONObject({label:U(t)("标签格式化")}),{default:d((()=>[c(b,new UTSJSONObject({modelValue:i.value,"onUpdate:modelValue":l[3]||(l[3]=(e=null)=>i.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),c(O,new UTSJSONObject({label:U(t)("禁用")}),{default:d((()=>[c(b,new UTSJSONObject({modelValue:p.value,"onUpdate:modelValue":l[4]||(l[4]=(e=null)=>p.value=e)}),null,8,["modelValue"])])),_:1},8,["label"])])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}))}}});export{F as default};
