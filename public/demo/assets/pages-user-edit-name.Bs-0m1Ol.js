import{_ as e}from"./cl-topbar.Ebe4Z2bj.js";import{d as a,r as t,v as l,a as s,o,c as n,w as r,e as u,u as c,t as i,f as p,g as d,H as m,q as f,_ as O,s as S}from"./index-CNagV5B9.js";import{o as b,r as _,_ as v,d as j,b as N,u as w}from"./cl-page.uvue_vue_type_script_setup_true_lang.Dujw6vu5.js";import{_ as T}from"./cl-input.tsrNEnDP.js";import{_ as U}from"./cl-footer.T69JFkIC.js";import"./form.psaMSS8r.js";const J=a({__name:"edit-name",setup(a){const J=w(),g=S().user,h=t("");function k(){return m(this,void 0,void 0,(function*(){if(h.value.length<2||h.value.length>20)return J.showToast({message:i("昵称长度需在2-20个字符之间")}),Promise.resolve(null);if(!/^[^@<>\/]*$/.test(h.value))return J.showToast({message:i("昵称不能包含@<>/等特殊字符")}),Promise.resolve(null);yield g.update(new UTSJSONObject({nickName:h.value})),f.back()}))}return b((()=>{var e,a;h.value=null!==(a=null===(e=l.value)||void 0===e?null:e.nickName)&&void 0!==a?a:""})),(a=null,t=null)=>{const l=_(s("cl-topbar"),e),m=_(s("cl-text"),v),f=_(s("cl-input"),T),S=O,b=_(s("cl-button"),j),w=_(s("cl-footer"),U),J=_(s("cl-page"),N);return o(),n(J,null,new UTSJSONObject({default:r((()=>[u(l,new UTSJSONObject({"safe-area-top":"",title:c(i)("编辑昵称"),"background-color":"transparent"}),null,8,["title"]),u(S,new UTSJSONObject({class:"p-3"}),{default:r((()=>[u(f,new UTSJSONObject({modelValue:h.value,"onUpdate:modelValue":t[0]||(t[0]=(e=null)=>h.value=e),autofocus:"",placeholder:c(i)("请输入昵称"),border:!1,pt:new UTSJSONObject({className:"-important-h--bracket-start-80rpx-bracket-end-"})}),{append:r((()=>[u(m,new UTSJSONObject({color:"info",pt:new UTSJSONObject({className:"-important-text-sm ml-2"})}),{default:r((()=>[p(d(h.value.length)+"/20",1)])),_:1})])),_:1},8,["modelValue","placeholder"]),u(S,new UTSJSONObject({class:"p-3"}),{default:r((()=>[u(m,new UTSJSONObject({color:"info",pt:new UTSJSONObject({className:"-important-text-sm"})}),{default:r((()=>[p(d(c(i)("请设置2-20个字符，不包括@<>/等无效字符")),1)])),_:1})])),_:1})])),_:1}),u(w,null,{default:r((()=>[u(b,new UTSJSONObject({size:"large",disabled:""==h.value,onClick:k}),{default:r((()=>[p(d(c(i)("确认")),1)])),_:1},8,["disabled"])])),_:1})])),_:1}))}}});export{J as default};
