import{d as e,a3 as t,h as l,aB as a,r as s,a4 as n,X as u,a as o,o as c,c as r,w as i,i as p,Y as d,aP as m,p as _,_ as S,e as b,n as v,N as O,u as f,A as w,x as h,aQ as j,aH as N,t as T}from"./index-CNagV5B9.js";import{r as U,_ as g,c as x,d as y,b as J}from"./cl-page.uvue_vue_type_script_setup_true_lang.Dujw6vu5.js";import{g as z}from"./device.i3CU_0gL.js";import{_ as k}from"./cl-switch.CYfHNfMX.js";import{_ as M}from"./cl-list-item.D9Fwhzfd.js";import{_ as V}from"./cl-list.DqrUvrrm.js";import{D as C}from"./item.BgF8i6G3.js";import"./form.psaMSS8r.js";import"./index.U6ITPUe7.js";import"./cl-collapse.S3OdLei1.js";import"./item.uvue_vue_type_style_index_0_scoped_b08ace3b_lang.LX4ndQdB.js";class A extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{className:{type:String,optional:!0},text:{type:"Unknown",optional:!0}}}}}constructor(e,t=A.get$UTSMetadata$(),l=!1){super(),this.__props__=UTS.UTSType.initProps(e,t,l),this.className=this.__props__.className,this.text=this.__props__.text,delete this.__props__}}const P=x(e(Object.assign({name:"cl-progress-circle"},{__name:"cl-progress-circle",props:{pt:{type:Object,default:()=>new UTSJSONObject({})},value:{type:Number,default:0},size:{type:Number,default:120},strokeWidth:{type:Number,default:8},color:{type:String,default:null},unColor:{type:String,default:null},showText:{type:Boolean,default:!0},unit:{type:String,default:"%"},startAngle:{type:Number,default:-Math.PI/2},clockwise:{type:Boolean,default:!0},duration:{type:Number,default:500}},setup(e,T){var x=T.expose;const y=e,J=t().proxy,k=z(),M=l((()=>d(y.pt)));let V=null,C=null;const A="cl-progress-circle__".concat(a()),P=s(0);function $(){var e,t;if(null==C)return null;const l=y.size/2*k,a=y.size/2*k,s=(y.size-y.strokeWidth)/2*k;C.clearRect(0,0,y.size*k,y.size*k),C.textBaseline="middle",C.textAlign="center",C.miterLimit=10,C.save();const n=(e,t,n)=>{if(null==C)return null;C.beginPath(),C.arc(l,a,s,e,t,!1),C.strokeStyle=n,C.lineWidth=y.strokeWidth*k,C.lineCap="round",C.lineJoin="round",C.stroke()};if(n(0,2*Math.PI,null!==(e=y.unColor)&&void 0!==e?e:_.value?N("surface-700"):N("surface-200")),P.value>0){const e=Math.max(0,Math.min(100,P.value))/100,l=y.startAngle+2*(y.clockwise?1:-1)*Math.PI*e;n(y.startAngle,l,null!==(t=y.color)&&void 0!==t?t:N("primary-500"))}}function B(e){const t=P.value,l=Date.now();!function a(){const s=Date.now()-l,n=Math.min(s/y.duration,1),u=1-Math.pow(1-n,3);P.value=Math.round(t+(e-t)*u),$(),n<1&&null!=V&&V.requestAnimationFrame((()=>{a()}))}()}return n((()=>{m({id:A,component:J,success:e=>{V=e,C=e.getContext("2d"),C.canvas.width=y.size*k,C.canvas.height=y.size*k,B(y.value)}}),u(l((()=>y.value)),(e=>{B(Math.max(0,Math.min(100,e)))}),{immediate:!0}),u(l((()=>[y.color,y.unColor,_.value])),(()=>{$()}))})),x(new UTSJSONObject({animate:B})),(t=null,l=null)=>{const a=j,s=U(o("cl-text"),g),n=S;return c(),r(n,new UTSJSONObject({class:p(["cl-progress-circle",[new UTSJSONObject({}),M.value.className]])}),{default:i((()=>[b(a,new UTSJSONObject({class:"cl-progress-circle__canvas",id:A,style:v({height:"".concat(y.size,"px"),width:"".concat(y.size,"px")})}),null,8,["style"]),O(t.$slots,"text",new UTSJSONObject({}),(()=>{var t;return[e.showText?(c(),r(s,{key:0,value:"".concat(P.value).concat(e.unit),pt:{className:f(w)(["absolute",null===(t=M.value.text)||void 0===t?null:t.className])}},null,8,["value","pt"])):h("",!0)]}),!0)])),_:3},8,["class"])}}})),[["__scopeId","data-v-58c308b5"]]),$=e({__name:"progress-circle",setup(e){const t=s(!1),l=s(!0),a=s(!1),n=s(!1),u=s(70);function p(){u.value<100&&(u.value+=10)}function d(){u.value>0&&(u.value-=10)}return(e=null,s=null)=>{const m=U(o("cl-progress-circle"),P),_=U(o("cl-switch"),k),v=U(o("cl-list-item"),M),O=U(o("cl-button"),y),w=U(o("cl-list"),V),h=S,j=U(o("cl-page"),J);return c(),r(j,null,new UTSJSONObject({default:i((()=>[b(h,new UTSJSONObject({class:"p-3"}),{default:i((()=>[b(f(C),new UTSJSONObject({label:f(T)("自定义")}),{default:i((()=>[b(m,new UTSJSONObject({value:u.value,color:a.value?"red":null,"un-color":a.value?"#f7bfbf":null,size:t.value?80:120,"show-text":l.value,duration:n.value?200:500}),null,8,["value","color","un-color","size","show-text","duration"]),b(w,new UTSJSONObject({border:"",pt:new UTSJSONObject({className:"mt-5"})}),{default:i((()=>[b(v,new UTSJSONObject({label:f(T)("改个颜色")}),{default:i((()=>[b(_,new UTSJSONObject({modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=(e=null)=>a.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),b(v,new UTSJSONObject({label:f(T)("显示文本")}),{default:i((()=>[b(_,new UTSJSONObject({modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=(e=null)=>l.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),b(v,new UTSJSONObject({label:f(T)("快一些")}),{default:i((()=>[b(_,new UTSJSONObject({modelValue:n.value,"onUpdate:modelValue":s[2]||(s[2]=(e=null)=>n.value=e)}),null,8,["modelValue"])])),_:1},8,["label"]),b(v,new UTSJSONObject({label:f(T)("显示文本")}),{default:i((()=>[b(O,new UTSJSONObject({type:"light",size:"small",icon:"add-line",onClick:p})),b(O,new UTSJSONObject({type:"light",size:"small",icon:"subtract-line",onClick:d}))])),_:1},8,["label"])])),_:1})])),_:1},8,["label"])])),_:1})])),_:1}))}}});export{$ as default};
