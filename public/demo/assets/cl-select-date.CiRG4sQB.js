import{_ as e}from"./cl-select-trigger.B_F60D0a.js";import{d as t,t as a,z as l,c as n,T as u,r,o,g as s,a as p,p as c,b as i,w as d,F as v,U as m,P as f,a7 as S,a8 as g,O as h,f as _,j as b,E as y,_ as O}from"./index-HFuwIx69.js";import{r as T,d as w,e as U,c as j}from"./cl-page.uvue_vue_type_script_setup_true_lang.7OJ874fC.js";import{_ as x}from"./cl-picker-view.OuXIQtDs.js";import{d as k}from"./day.C_d5fVLf.js";class N extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{trigger:{type:"Unknown",optional:!0},popup:{type:"Unknown",optional:!0}}}}}constructor(e,t=N.get$UTSMetadata$(),a=!1){super(),this.__props__=UTS.UTSType.initProps(e,t,a),this.trigger=this.__props__.trigger,this.popup=this.__props__.popup,delete this.__props__}}const Y=j(t(Object.assign({name:"cl-select-date"},{__name:"cl-select-date",props:{pt:{type:Object,default:()=>new UTSJSONObject({})},modelValue:{type:String,default:""},headers:{type:Array,default:()=>[a("年"),a("月"),a("日"),a("时"),a("分"),a("秒")]},title:{type:String,default:a("请选择")},placeholder:{type:String,default:a("请选择")},showTrigger:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},confirmText:{type:String,default:a("确定")},showConfirm:{type:Boolean,default:!0},cancelText:{type:String,default:a("取消")},showCancel:{type:Boolean,default:!0},labelFormat:{type:String,default:""},valueFormat:{type:String,default:""},start:{type:String,default:"1950-01-01 00:00:00"},end:{type:String,default:"2050-12-31 23:59:59"},type:{type:String,default:"second"}},emits:["update:modelValue","change"],setup(t,a){var j=a.expose,N=a.emit;const Y=t,J=N,C=l(null),F=n((()=>m(Y.pt))),M=n((()=>{switch(Y.type){case"year":return"YYYY";case"month":return"YYYY-MM";case"date":return"YYYY-MM-DD";default:return"YYYY-MM-DD HH:mm:ss"}})),V=n((()=>f(Y.labelFormat)||S(Y.labelFormat)?M.value:Y.labelFormat)),A=n((()=>f(Y.valueFormat)||S(Y.valueFormat)?M.value:Y.valueFormat)),B=l([]),D=n((()=>{const e=g(k(Y.start).toArray(),6),t=e[0],a=e[1],l=e[2],n=e[3],u=e[4],r=e[5],o=g(k(Y.end).toArray(),6),s=o[0],p=o[1],c=o[2],i=o[3],d=o[4],v=o[5],m=g(B.value,5),f=m[0],S=m[1],h=m[2],_=m[3],b=m[4],y=[[],[],[],[],[],[]],O=[31,f%4==0&&f%100!=0||f%400==0?29:28,31,30,31,30,31,31,30,31,30,31][S-1],T=Math.max(60,s-t+1);for(let g=0;g<T;g++){const e=t+g;e<=s&&y[0].push({label:e.toString(),value:e});let o=t==f?a+g:g+1;o<=(s==f?p:12)&&y[1].push({label:o.toString().padStart(2,"0"),value:o});let m=t==f&&a==S?l+g:g+1;m<=(s==f&&p==S?c:O)&&y[2].push({label:m.toString().padStart(2,"0"),value:m});let T=t==f&&a==S&&l==h?n+g:g;T<(s==f&&p==S&&c==h?i:24)&&y[3].push({label:T.toString().padStart(2,"0"),value:T});let w=t==f&&a==S&&l==h&&n==_?u+g:g;w<(s==f&&p==S&&c==h&&i==_?d:60)&&y[4].push({label:w.toString().padStart(2,"0"),value:w});let U=t==f&&a==S&&l==h&&n==_&&u==b?r+g:g;U<(s==f&&p==S&&c==h&&i==_&&d==b?v:60)&&y[5].push({label:U.toString().padStart(2,"0"),value:U})}return y})),$=n((()=>["year","month","date","hour","minute","second"].findIndex((e=>e==Y.type))+1)),z=n((()=>D.value.slice(0,$.value))),I=n((()=>S(B.value)?[]:B.value.map(((e,t)=>{const a=D.value[t].findIndex((t=>t.value==e));return-1==a?0:a}))));function E(){const e=[],t=[2e3,1,1,0,0,0];return["","-","-"," ",":",":"].forEach(((a,l)=>{let n=B.value[l];l>=$.value&&(n=t[l]),e.push(a+n.toString().padStart(2,"0"))})),e.join("")}const H=l("");function P(){H.value=k(E()).format(V.value)}function R(e){return y(this,void 0,void 0,(function*(){for(let t=0;t<e.length;t++)B.value[t]=D.value[t][e[t]].value}))}const q=l(!1);let G=null;function K(e=null){if(Y.disabled)return null;q.value=!0,G=e}function L(){q.value=!1}function Q(){H.value="",J("update:modelValue",""),J("change","")}function W(){const e=k(E()).format(A.value);J("update:modelValue",e),J("change",e),null!=G&&G(e),P(),L()}return u(n((()=>Y.modelValue)),(e=>{f(e)||S(e)?B.value=k().toArray():(B.value=k(e).toArray(),P())}),{immediate:!0}),j(new UTSJSONObject({open:K,close:L})),(a=null,l=null)=>{var n,u,m,f,S,g,y,j;const k=T(r("cl-select-trigger"),e),N=T(r("cl-picker-view"),x),Y=O,J=T(r("cl-button"),w),M=T(r("cl-popup"),U);return o(),s(v,null,[t.showTrigger?(o(),p(k,{key:0,pt:{className:null===(n=F.value.trigger)||void 0===n?null:n.className,icon:null===(u=F.value.trigger)||void 0===u?null:u.icon},placeholder:t.placeholder,disabled:t.disabled,focus:null===(m=C.value)||void 0===m?null:m.isOpen,text:H.value,"arrow-icon":"calendar-line",onClick:l[0]||(l[0]=(e=null)=>K()),onClear:Q},null,8,["pt","placeholder","disabled","focus","text"])):c("",!0),i(M,{ref_key:"popupRef",ref:C,modelValue:q.value,"onUpdate:modelValue":l[2]||(l[2]=(e=null)=>q.value=e),title:t.title,pt:{className:null===(f=F.value.popup)||void 0===f?null:f.className,header:null===(S=F.value.popup)||void 0===S?null:S.header,container:null===(g=F.value.popup)||void 0===g?null:g.container,mask:null===(y=F.value.popup)||void 0===y?null:y.mask,draw:null===(j=F.value.popup)||void 0===j?null:j.draw}},{default:d((()=>[i(Y,new UTSJSONObject({class:"cl-select-popup",onTouchmove:l[1]||(l[1]=h((()=>{}),["stop"]))}),{default:d((()=>[i(Y,new UTSJSONObject({class:"cl-select-popup__picker"}),{default:d((()=>[i(N,new UTSJSONObject({headers:t.headers,value:I.value,columns:z.value,onChange:R}),null,8,["headers","value","columns"])])),_:1}),i(Y,new UTSJSONObject({class:"cl-select-popup__op"}),{default:d((()=>[t.showCancel?(o(),p(J,new UTSJSONObject({key:0,size:"large",text:"",border:"",type:"light",pt:new UTSJSONObject({className:"flex-1 -important-rounded-xl h--bracket-start-80rpx-bracket-end-"}),onClick:L}),new UTSJSONObject({default:d((()=>[_(b(t.cancelText),1)])),_:1}))):c("",!0),t.showConfirm?(o(),p(J,new UTSJSONObject({key:1,size:"large",pt:new UTSJSONObject({className:"flex-1 -important-rounded-xl h--bracket-start-80rpx-bracket-end-"}),onClick:W}),new UTSJSONObject({default:d((()=>[_(b(t.confirmText),1)])),_:1}))):c("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue","title","pt"])],64)}}})),[["__scopeId","data-v-75b70bde"]]);export{Y as _};
