import{_ as e}from"./cl-topbar.BUGq_ADo.js";import{d as a,z as t,r as l,o as s,a as o,w as n,m as r,b as u,u as c,t as i,f as p,j as m,E as d,k as f,_ as b}from"./index-DG2Quqiw.js";import{u as O,o as S,r as _,a as j,d as v,b as N}from"./cl-page.uvue_vue_type_script_setup_true_lang.C2WMPzU-.js";import{_ as w}from"./cl-input.BWyOu4J3.js";import{_ as T}from"./cl-footer.CL3pzYhe.js";const U=a({__name:"edit-name",setup(a){const U=O(),J=r().user,g=t("");function h(){return d(this,void 0,void 0,(function*(){if(g.value.length<2||g.value.length>20)return U.showToast({message:i("昵称长度需在2-20个字符之间")}),Promise.resolve(null);if(!/^[^@<>\/]*$/.test(g.value))return U.showToast({message:i("昵称不能包含@<>/等特殊字符")}),Promise.resolve(null);yield J.update({nickName:g.value}),f.back()}))}return S((()=>{var e;g.value=null!==(e=J.info.nickName)&&void 0!==e?e:""})),(a=null,t=null)=>{const r=_(l("cl-topbar"),e),d=_(l("cl-text"),j),f=_(l("cl-input"),w),O=b,S=_(l("cl-button"),v),U=_(l("cl-footer"),T),J=_(l("cl-page"),N);return s(),o(J,null,new UTSJSONObject({default:n((()=>[u(r,new UTSJSONObject({"safe-area-top":"",title:c(i)("编辑昵称"),"background-color":"transparent"}),null,8,["title"]),u(O,new UTSJSONObject({class:"p-3"}),{default:n((()=>[u(f,new UTSJSONObject({modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=(e=null)=>g.value=e),autofocus:"",placeholder:c(i)("请输入昵称"),border:!1,pt:new UTSJSONObject({className:"-important-h--bracket-start-80rpx-bracket-end-"})}),{append:n((()=>[u(d,new UTSJSONObject({color:"info",pt:new UTSJSONObject({className:"-important-text-sm ml-2"})}),{default:n((()=>[p(m(g.value.length)+"/20",1)])),_:1})])),_:1},8,["modelValue","placeholder"]),u(O,new UTSJSONObject({class:"p-3"}),{default:n((()=>[u(d,new UTSJSONObject({color:"info",pt:new UTSJSONObject({className:"-important-text-sm"})}),{default:n((()=>[p(m(c(i)("请设置2-20个字符，不包括@<>/等无效字符")),1)])),_:1})])),_:1})])),_:1}),u(U,null,{default:n((()=>[u(S,new UTSJSONObject({size:"large",disabled:""==g.value,onClick:h}),{default:n((()=>[p(m(c(i)("确认")),1)])),_:1},8,["disabled"])])),_:1})])),_:1}))}}});export{U as default};
