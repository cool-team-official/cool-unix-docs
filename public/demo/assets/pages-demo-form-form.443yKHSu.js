import{_ as e}from"./cl-upload.CKmDF8a5.js";import{d as l,h as a,U as t,V as r,W as n,a as s,o,c as u,w as i,i as c,X as d,_ as p,e as m,n as S,f as b,g as v,v as f,I as _,u as O,z as h,Y as U,Z as g,r as w,G as T,a0 as N,a1 as j,a2 as y,a3 as J,a4 as x,t as V,$ as k,a5 as q,p as A,l as P,m as $,F as M}from"./index-Dg8V4FTF.js";import{r as E,_ as R,c as B,f as F,d as C,b as W,u as G}from"./cl-page.uvue_vue_type_script_setup_true_lang.DRUWCFX0.js";import{u as z}from"./form.BnWW6MAY.js";import{_ as I}from"./cl-input.BVBLhZeS.js";import{_ as D}from"./cl-slider.D4JvwNvm.js";import{_ as X}from"./cl-checkbox.BCUDvLAr.js";import{_ as Y}from"./cl-select.DRy1h6rx.js";import{p as Z,_ as H}from"./pca.CwivvowK.js";import{_ as K}from"./cl-select-date.Ste3TbV1.js";import{_ as L}from"./cl-textarea.ZBOJwwVO.js";import{_ as Q}from"./cl-switch.BH5BTtxO.js";import{_ as ee}from"./cl-footer.CGeMjzz8.js";import{d as le}from"./day.C6z4Qky5.js";import{u as ae}from"./cl-list-view.B7-6Xevh.js";import{D as te}from"./item.SJbBBSMO.js";import"./cl-progress.Bct2ahnl.js";import"./cl-rolling-number.B30rvWnA.js";import"./index.BSngOzBs.js";import"./cl-select-trigger.Bi4MtjWw.js";import"./cl-picker-view.BR9S-tqR.js";import"./cl-tag.DSsseZ17.js";import"./index.U6ITPUe7.js";import"./item.uvue_vue_type_style_index_0_scoped_b08ace3b_lang.CF16VeAr.js";UTS.UTSType;const re=B(l(Object.assign({name:"cl-form-item"},{__name:"cl-form-item",props:{pt:{type:Object,default:()=>new UTSJSONObject({})},label:{type:String,default:""},prop:{type:String,default:""},rules:{type:Array,default:()=>[]},labelPosition:{type:String,default:null},labelWidth:{type:String,default:null},showAsterisk:{type:Boolean,default:null},showMessage:{type:Boolean,default:null},required:{type:Boolean,default:!1}},setup(e,l){var g=l.expose;const w=e,T=z(),N=T.formRef,j=T.getError,y=T.getValue,J=T.validateField,x=T.addField,V=T.removeField,k=T.setRule,q=a((()=>d(w.pt))),A=a((()=>j(w.prop))),P=a((()=>""!=A.value)),$=a((()=>{var e,l,a;return null!==(a=null!==(e=w.labelPosition)&&void 0!==e?e:null===(l=N.value)||void 0===l?null:l.labelPosition)&&void 0!==a?a:"left"})),M=a((()=>{var e,l,a;return null!==(a=null!==(e=w.labelWidth)&&void 0!==e?e:null===(l=N.value)||void 0===l?null:l.labelWidth)&&void 0!==a?a:"120rpx"})),B=a((()=>{var e,l,a;return!!w.required&&(null===(a=null!==(e=w.showAsterisk)&&void 0!==e?e:null===(l=N.value)||void 0===l?null:l.showAsterisk)||void 0===a||a)})),F=a((()=>{var e,l,a;return!!w.required&&(null===(a=null!==(e=w.showMessage)&&void 0!==e?e:null===(l=N.value)||void 0===l?null:l.showMessage)||void 0===a||a)}));return t(a((()=>w.required)),(e=>{e?x(w.prop,w.rules):V(w.prop)}),{immediate:!0}),r((()=>{t(a((()=>{const e=y(w.prop);return null==e?"":e})),((e=null,l=null)=>{w.required&&(U(e,l)||J(w.prop))}),{deep:!0}),t(a((()=>w.rules)),(e=>{k(w.prop,e)}),{deep:!0})})),n((()=>{V(w.prop)})),g(new UTSJSONObject({prop:w.prop})),(l=null,a=null)=>{const t=E(s("cl-text"),R),r=p;return o(),u(r,new UTSJSONObject({class:c(["cl-form-item",[new UTSJSONObject({}),new UTSJSONObject({"cl-form-item--error":P.value}),q.value.className]]),id:"cl-form-item-".concat(e.prop)}),{default:i((()=>{var a;return[m(r,{class:c(["cl-form-item__inner",[new UTSJSONObject({}),"is-".concat($.value),null===(a=q.value.inner)||void 0===a?null:a.className]])},{default:i((()=>{var a,n;return[""!=e.label?(o(),u(r,{key:0,class:c(["cl-form-item__label",[new UTSJSONObject({}),"is-".concat($.value),null===(a=q.value.label)||void 0===a?null:a.className]]),style:S({width:"top"!=$.value?M.value:"auto"})},new UTSJSONObject({default:i((()=>[m(t,null,{default:i((()=>[b(v(e.label),1)])),_:1}),B.value?(o(),u(t,new UTSJSONObject({key:0,color:"error",pt:new UTSJSONObject({className:"ml-1"})}),new UTSJSONObject({default:i((()=>[b(" * ")])),_:1}))):f("",!0)])),_:1}),8,["class","style"])):f("",!0),m(r,{class:c(["cl-form-item__content",[new UTSJSONObject({}),null===(n=q.value.content)||void 0===n?null:n.className]])},{default:i((()=>[_(l.$slots,"default",new UTSJSONObject({}),void 0,!0)])),_:3},8,["class"])]})),_:3},8,["class"]),P.value&&F.value?(o(),u(r,new UTSJSONObject({key:0,class:"cl-form-item__error"}),{default:i((()=>[_(l.$slots,"error",new UTSJSONObject({error:A.value}),(()=>{var e;return[m(t,{color:"error",pt:{className:O(h)(["mt-2 -important-text-sm",null===(e=q.value.error)||void 0===e?null:e.className])}},{default:i((()=>[b(v(A.value),1)])),_:1},8,["pt"])]}),!0)])),_:3})):f("",!0)]})),_:3},8,["class","id"])}}})),[["__scopeId","data-v-0a3daede"]]);class ne extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{className:{type:String,optional:!0}}}}}constructor(e,l=ne.get$UTSMetadata$(),a=!1){super(),this.__props__=UTS.UTSType.initProps(e,l,a),this.className=this.__props__.className,delete this.__props__}}const se=B(l(Object.assign({name:"cl-form"},{__name:"cl-form",props:{pt:{type:Object,default:()=>new UTSJSONObject({})},modelValue:{type:Object,default:()=>new UTSJSONObject({})},rules:{type:Object,default:()=>new Map},labelPosition:{type:String,default:"top"},labelWidth:{type:String,default:"140rpx"},showAsterisk:{type:Boolean,default:!0},showMessage:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},scrollToError:{type:Boolean,default:!0}},setup(e,l){var r=l.expose;const n=e,s=g().proxy,m=F(),S=a((()=>d(n.pt))),b=w(new UTSJSONObject({})),v=w(new Map),f=w(new Set([])),O=a((()=>n.labelPosition)),h=a((()=>n.labelWidth)),U=a((()=>n.showAsterisk)),A=a((()=>n.showMessage)),P=a((()=>n.disabled)),$=w(!1);function M(e,l){if($.value)return null;""!=e&&v.value.set(e,l)}function E(e){""!=e&&v.value.delete(e)}function R(e){var l;return""!=e&&null!==(l=v.value.get(e))&&void 0!==l?l:""}function B(){return T(this,void 0,void 0,(function*(){return new Promise((e=>{const l=[],a=new Map;function t(){var t;a.forEach(((e,a)=>{l.push({field:a,message:R(a)})})),n.scrollToError&&l.length>0&&m.scrollTo((null!==(t=UTS.mapGet(a,l[0].field))&&void 0!==t?t:0)+m.getScrollTop()),e(l)}if(0==v.value.size)return t(),null;N((()=>{let e=s;j().in(e).selectAll(".cl-form-item--error").boundingClientRect(((e=null)=>{e.map((e=>{var l,t;a.set((null!==(l=e.id)&&void 0!==l?l:"").replace("cl-form-item-",""),null!==(t=e.top)&&void 0!==t?t:0)})),t()})).exec()}))}))}))}function C(){v.value.clear()}function W(e){return""!=e?y(b.value,e,null):null}function G(e){var l;return null!==(l=UTS.mapGet(n.rules,e))&&void 0!==l?l:[]}function z(e,l){""==e||J(l)||n.rules.set(e,l)}function I(e){""!=e&&n.rules.delete(e)}function D(e=null,l){var a,t,r,n,s,o,u;if(1==l.required&&(null==e||""==e&&x(e)||Array.isArray(e)&&0==e.length))return null!==(a=l.message)&&void 0!==a?a:V("此字段为必填项");if((null==e||""==e&&x(e))&&1!=l.required)return null;if(null!=l.min)if("number"==typeof e){if(e<l.min)return null!==(t=l.message)&&void 0!==t?t:k("最小值为{min}",new UTSJSONObject({min:l.min}))}else{if((Array.isArray(e)?e.length:"".concat(e).length)<l.min)return null!==(r=l.message)&&void 0!==r?r:k("最少需要{min}个字符",new UTSJSONObject({min:l.min}))}if(null!=l.max)if("number"==typeof e){if(e>l.max)return null!==(n=l.message)&&void 0!==n?n:k("最大值为{max}",new UTSJSONObject({max:l.max}))}else{if((Array.isArray(e)?e.length:"".concat(e).length)>l.max)return null!==(s=l.message)&&void 0!==s?s:k("最多允许{max}个字符",new UTSJSONObject({max:l.max}))}if(null!=l.pattern&&!l.pattern.test("".concat(e)))return null!==(o=l.message)&&void 0!==o?o:V("格式不正确");if(null!=l.validator){const a=l.validator(e);if(1!=a)return"string"==typeof a?a:null!==(u=l.message)&&void 0!==u?u:V("验证失败")}return null}function X(e){let l=null;if(""!=e){const a=W(e),t=G(e);J(t)||UTS.arrayFind(t,(e=>{const t=D(a,e);return null!=t&&(l=t,!0)})),E(e)}return null!=l&&M(e,l),l}return t(a((()=>q(n.modelValue))),(e=>{b.value=e}),{immediate:!0,deep:!0}),r(new UTSJSONObject({labelPosition:O,labelWidth:h,showAsterisk:U,showMessage:A,disabled:P,data:b,errors:v,fields:f,addField:function(e,l){""!=e&&(f.value.add(e),z(e,l))},removeField:function(e){""!=e&&(f.value.delete(e),I(e),E(e))},getValue:W,setError:M,getError:R,getErrors:B,removeError:E,clearErrors:C,getRule:G,setRule:z,removeRule:I,validateRule:D,clearValidate:function(){$.value=!0,N((()=>{C(),$.value=!1}))},validateField:X,validate:function(e){return T(this,void 0,void 0,(function*(){f.value.forEach((e=>{X(e)}));const l=yield B();e(0==l.length,l)}))}})),(e=null,l=null)=>{const a=p;return o(),u(a,new UTSJSONObject({class:c(["cl-form",[new UTSJSONObject({}),"cl-form--label-".concat(O.value),new UTSJSONObject({"cl-form--disabled":P.value}),S.value.className]])}),new UTSJSONObject({default:i((()=>[_(e.$slots,"default",new UTSJSONObject({}),void 0,!0)])),_:3}),8,["class"])}}})),[["__scopeId","data-v-8d7b7bbe"]]);class oe extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{phone:{type:String,optional:!1}}}}}constructor(e,l=oe.get$UTSMetadata$(),a=!1){super(),this.__props__=UTS.UTSType.initProps(e,l,a),this.phone=this.__props__.phone,delete this.__props__}}class ue extends UTS.UTSType{static get$UTSMetadata$(){return{kind:2,get fields(){return{avatarUrl:{type:String,optional:!1},nickName:{type:String,optional:!1},email:{type:String,optional:!1},height:{type:Number,optional:!1},weight:{type:Number,optional:!1},gender:{type:Number,optional:!1},description:{type:String,optional:!1},pca:{type:UTS.UTSType.withGenerics(Array,[String]),optional:!1},tags:{type:UTS.UTSType.withGenerics(Array,[Number]),optional:!1},birthday:{type:String,optional:!1},isPublic:{type:Boolean,optional:!1},contacts:{type:UTS.UTSType.withGenerics(Array,[oe]),optional:!1}}}}}constructor(e,l=ue.get$UTSMetadata$(),a=!1){super(),this.__props__=UTS.UTSType.initProps(e,l,a),this.avatarUrl=this.__props__.avatarUrl,this.nickName=this.__props__.nickName,this.email=this.__props__.email,this.height=this.__props__.height,this.weight=this.__props__.weight,this.gender=this.__props__.gender,this.description=this.__props__.description,this.pca=this.__props__.pca,this.tags=this.__props__.tags,this.birthday=this.__props__.birthday,this.isPublic=this.__props__.isPublic,this.contacts=this.__props__.contacts,delete this.__props__}}const ie=l({__name:"form",setup(l){const a=G(),t=z(),r=t.formRef,n=t.validate,d=t.clearValidate,S=[{label:V("未知"),value:0},{label:V("男"),value:1},{label:V("女"),value:2}],f=[{label:V("篮球"),value:1},{label:V("足球"),value:2},{label:V("羽毛球"),value:3},{label:V("乒乓球"),value:4},{label:V("游泳"),value:5}],_=ae(Z),h=w(new ue({avatarUrl:"",nickName:"神仙都没用",email:"",height:180,weight:70,gender:0,description:"",pca:[],tags:[1,2],birthday:"",isPublic:!1,contacts:[]})),U=new Map([["nickName",[{required:!0,message:V("用户名不能为空")},{min:3,max:20,message:V("用户名长度在3-20个字符之间")}]],["email",[{required:!0,message:V("邮箱不能为空")},{pattern:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:V("邮箱格式不正确")}]],["height",[{required:!0,message:V("身高不能为空")},{min:160,max:190,message:V("身高在160-190cm之间")}]],["weight",[{required:!0,message:V("体重不能为空")},{min:40,max:100,message:V("体重在40-100kg之间")}]],["tags",[{required:!0,message:V("标签不能为空")},{min:1,max:2,message:V("标签最多选择2个")}]],["gender",[{required:!0,message:V("性别不能为空")}]],["pca",[{required:!0,message:V("所在地区不能为空")}]],["birthday",[{required:!0,message:V("出生年月不能为空")},{validator:(e=null)=>!le(e).isAfter(le("2010-01-01"))||V("出生年月不大于2010-01-01")}]],["contacts",[{required:!0,message:V("联系人不能为空")}]]]),g=w(!1);function T(){h.value.avatarUrl="",h.value.nickName="",h.value.email="",h.value.height=180,h.value.weight=70,h.value.gender=0,h.value.description="",h.value.pca=[],h.value.tags=[],h.value.birthday="",h.value.isPublic=!1,h.value.contacts=[],d()}function N(){n(((e,l)=>{e?(g.value=!0,setTimeout((()=>{a.showToast({message:V("提交成功"),icon:"check-line"}),g.value=!1,T()}),2e3)):a.showToast({message:l[0].message})}))}function j(){h.value.contacts.push(new oe({phone:""}))}return(l=null,a=null)=>{const t=E(s("cl-upload"),e),n=E(s("cl-form-item"),re),d=E(s("cl-input"),I),w=E(s("cl-button"),C),y=p,J=E(s("cl-text"),R),x=E(s("cl-slider"),D),k=E(s("cl-checkbox"),X),q=E(s("cl-select"),Y),B=E(s("cl-cascader"),H),F=E(s("cl-select-date"),K),G=E(s("cl-textarea"),L),z=E(s("cl-switch"),Q),Z=E(s("cl-form"),se),le=E(s("cl-footer"),ee),ae=E(s("cl-page"),W);return o(),u(ae,null,new UTSJSONObject({default:i((()=>[m(y,new UTSJSONObject({class:"p-3"}),{default:i((()=>[m(O(te),null,{default:i((()=>[m(Z,new UTSJSONObject({pt:new UTSJSONObject({className:"p-2 pb-0"}),modelValue:h.value,"onUpdate:modelValue":a[11]||(a[11]=(e=null)=>h.value=e),ref_key:"formRef",ref:r,rules:O(U),disabled:g.value,"label-position":"top"}),{default:i((()=>[m(n,new UTSJSONObject({prop:"avatarUrl"}),{default:i((()=>[m(t,new UTSJSONObject({modelValue:h.value.avatarUrl,"onUpdate:modelValue":a[0]||(a[0]=(e=null)=>h.value.avatarUrl=e),test:""}),null,8,["modelValue"])])),_:1}),m(n,new UTSJSONObject({label:O(V)("用户名"),prop:"nickName",required:""}),{default:i((()=>[m(d,new UTSJSONObject({modelValue:h.value.nickName,"onUpdate:modelValue":a[1]||(a[1]=(e=null)=>h.value.nickName=e),placeholder:O(V)("请输入用户名"),clearable:""}),null,8,["modelValue","placeholder"])])),_:1},8,["label"]),m(n,new UTSJSONObject({label:O(V)("邮箱"),prop:"email"}),{default:i((()=>[m(d,new UTSJSONObject({modelValue:h.value.email,"onUpdate:modelValue":a[2]||(a[2]=(e=null)=>h.value.email=e),placeholder:O(V)("请输入邮箱地址")}),null,8,["modelValue","placeholder"])])),_:1},8,["label"]),m(n,new UTSJSONObject({label:O(V)("动态验证"),required:"",prop:"contacts"}),{default:i((()=>[m(y,new UTSJSONObject({class:c(["contacts border border-solid border-surface-200 rounded-xl p-3",new UTSJSONObject({"dark-colon--important-border-surface-700":O(A)})])}),{default:i((()=>[(o(!0),P(M,null,$(h.value.contacts,((e,l)=>(o(),u(n,new UTSJSONObject({key:l,label:O(V)("联系人")+" - ".concat(l+1),prop:"contacts[".concat(l,"].phone"),rules:[{required:!0,message:O(V)("手机号不能为空")}],required:""}),new UTSJSONObject({default:i((()=>[m(y,new UTSJSONObject({class:"flex flex-row items-center"}),{default:i((()=>[m(d,new UTSJSONObject({pt:new UTSJSONObject({className:"flex-1 mr-2"}),modelValue:e.phone,"onUpdate:modelValue":(l=null)=>e.phone=l,placeholder:O(V)("请输入手机号")}),null,8,["modelValue","onUpdate:modelValue","placeholder"]),m(w,new UTSJSONObject({type:"light",icon:"subtract-line",onClick:(e=null)=>function(e){h.value.contacts.splice(e,1)}(l)}),null,8,["onClick"])])),_:2},1024)])),_:2}),1032,["label","prop","rules"])))),128)),m(w,new UTSJSONObject({icon:"add-line",onClick:j}),{default:i((()=>[b(v(O(V)("添加联系人")),1)])),_:1})])),_:1},8,["class"])])),_:1},8,["label"]),m(n,new UTSJSONObject({label:O(V)("身高"),prop:"height",required:""}),{default:i((()=>[m(x,new UTSJSONObject({modelValue:h.value.height,"onUpdate:modelValue":a[3]||(a[3]=(e=null)=>h.value.height=e),max:220,"show-value":""}),{value:i((e=>{var l=e.value;return[m(J,new UTSJSONObject({pt:new UTSJSONObject({className:"text-center w--bracket-start-120rpx-bracket-end-"})}),{default:i((()=>[b(v(l)+" cm",1)])),_:2},1024)]})),_:1},8,["modelValue"])])),_:1},8,["label"]),m(n,new UTSJSONObject({label:O(V)("体重"),prop:"weight",required:""}),{default:i((()=>[m(x,new UTSJSONObject({modelValue:h.value.weight,"onUpdate:modelValue":a[4]||(a[4]=(e=null)=>h.value.weight=e),max:150,"show-value":""}),{value:i((e=>{var l=e.value;return[m(J,new UTSJSONObject({pt:new UTSJSONObject({className:"text-center w--bracket-start-120rpx-bracket-end-"})}),{default:i((()=>[b(v(l)+" kg",1)])),_:2},1024)]})),_:1},8,["modelValue"])])),_:1},8,["label"]),m(n,new UTSJSONObject({label:O(V)("标签"),prop:"tags",required:""}),{default:i((()=>[m(y,new UTSJSONObject({class:"flex flex-row flex-wrap"}),{default:i((()=>[(o(),P(M,null,$(f,((e,l)=>m(k,new UTSJSONObject({modelValue:h.value.tags,"onUpdate:modelValue":a[5]||(a[5]=(e=null)=>h.value.tags=e),key:l,value:l,pt:new UTSJSONObject({className:"mr-5 mt-2"})}),{default:i((()=>[b(v(e.label),1)])),_:2},1032,["modelValue","value"]))),64))])),_:1})])),_:1},8,["label"]),m(n,new UTSJSONObject({label:O(V)("性别"),prop:"gender",required:""}),{default:i((()=>[m(q,new UTSJSONObject({modelValue:h.value.gender,"onUpdate:modelValue":a[6]||(a[6]=(e=null)=>h.value.gender=e),options:S}),null,8,["modelValue"])])),_:1},8,["label"]),m(n,new UTSJSONObject({label:O(V)("所在地区"),prop:"pca",required:""}),{default:i((()=>[m(B,new UTSJSONObject({modelValue:h.value.pca,"onUpdate:modelValue":a[7]||(a[7]=(e=null)=>h.value.pca=e),options:O(_)}),null,8,["modelValue","options"])])),_:1},8,["label"]),m(n,new UTSJSONObject({label:O(V)("出生年月"),prop:"birthday",required:""}),{default:i((()=>[m(F,new UTSJSONObject({modelValue:h.value.birthday,"onUpdate:modelValue":a[8]||(a[8]=(e=null)=>h.value.birthday=e),type:"date"}),null,8,["modelValue"])])),_:1},8,["label"]),m(n,new UTSJSONObject({label:O(V)("个人简介"),prop:"description"}),{default:i((()=>[m(G,new UTSJSONObject({modelValue:h.value.description,"onUpdate:modelValue":a[9]||(a[9]=(e=null)=>h.value.description=e),placeholder:O(V)("请输入个人简介"),maxlength:200}),null,8,["modelValue","placeholder"])])),_:1},8,["label"]),m(n,new UTSJSONObject({label:O(V)("公开状态")}),{default:i((()=>[m(z,new UTSJSONObject({modelValue:h.value.isPublic,"onUpdate:modelValue":a[10]||(a[10]=(e=null)=>h.value.isPublic=e)}),null,8,["modelValue"])])),_:1},8,["label"])])),_:1},8,["modelValue","rules","disabled"])])),_:1}),m(O(te),null,{default:i((()=>[m(J,new UTSJSONObject({"pre-wrap":"",pt:new UTSJSONObject({className:"-important-text-sm p-2"})}),{default:i((()=>[b(v(UTS.JSON.stringify(h.value,null,4)),1)])),_:1})])),_:1})])),_:1}),m(le,null,{default:i((()=>[m(y,new UTSJSONObject({class:"flex flex-row"}),{default:i((()=>[m(w,new UTSJSONObject({type:"info",pt:new UTSJSONObject({className:"flex-1"}),onClick:T}),{default:i((()=>[b(v(O(V)("重置")),1)])),_:1}),m(w,new UTSJSONObject({type:"primary",loading:g.value,pt:new UTSJSONObject({className:"flex-1"}),onClick:N}),{default:i((()=>[b(v(O(V)("提交")),1)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1}))}}});export{ie as default};
